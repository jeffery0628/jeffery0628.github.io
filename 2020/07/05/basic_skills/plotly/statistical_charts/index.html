<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/snoppy.jpeg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/snoppy.jpeg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/snoppy.jpeg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open Sans:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jeffery.ink","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":15,"offset":12,"onmobile":true,"dimmer":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="统计类图表">
<meta property="og:url" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/index.html">
<meta property="og:site_name" content="火种2号">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705114624820.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705231233970.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705232439037.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705232736114.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233203182.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233352773.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233530492.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233700876.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233807973.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705234352322.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/o_boxplot.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/884095-20171009221403902-824833776.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073450664.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073718915.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073807119.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074257659.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074525542.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074749153.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074916918.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075003317.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075201456.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075259976.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075611496.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075649137.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075836720.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080051349.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080326188.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080428043.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080538915.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706194745710.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706194851212.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706195835189.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200216514.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200404134.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200500652.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200715716.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200844987.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201001825.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201109511.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201153754.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201322488.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201757626.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201905651.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706203205427.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706203928893.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204102438.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204350809.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204757175.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115242906.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115353642.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115710770.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115927252.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120100641.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120208449.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120435602.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120551398.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120709229.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120804496.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706205725585.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210155309.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210317583.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210845346.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211032831.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211216501.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211431472.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211647050.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212234294.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212344611.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212533201.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212809447.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212937537.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213034213.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213152973.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213417004.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214325733.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214534103.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214809394.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214908170.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215153939.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215300199.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215454880.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215718601.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709223852876.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224118321.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224308377.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224600260.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709225135256.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709225334650.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231144923.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231744911.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231927096.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065415158.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065504809.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065636430.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065722299.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070017563.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070133330.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070239758.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070352035.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070458861.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070742043.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710071413340.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072134581.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072254454.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072339270.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072421605.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072503105.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072630836.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072658923.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072816387.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073138306.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073236825.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073328092.png">
<meta property="og:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073406803.png">
<meta property="article:published_time" content="2020-07-05T03:44:55.000Z">
<meta property="article:modified_time" content="2020-07-11T01:00:10.410Z">
<meta property="article:author" content="Li Zhen">
<meta property="article:tag" content="plotly">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705114624820.png">

<link rel="canonical" href="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>统计类图表 | 火种2号</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">火种2号</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">火种计划</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>简历</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-books">

    <a href="/books/" rel="section"><i class="fa fa-book fa-fw"></i>读书</a>

  </li>
        <li class="menu-item menu-item-movies">

    <a href="/movies/" rel="section"><i class="fa fa-video fa-fw"></i>电影</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>



</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jeffery.ink/2020/07/05/basic_skills/plotly/statistical_charts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/snoppy.jpeg">
      <meta itemprop="name" content="Li Zhen">
      <meta itemprop="description" content="他，不论在成年还是在小时候，必须踏上一条极为艰苦的道路，不过这是一条最可靠的道路。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="火种2号">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          统计类图表
        </h1>

        <div class="post-meta">
          
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-11 09:00:10" itemprop="dateModified" datetime="2020-07-11T09:00:10+08:00">2020-07-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF-%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD/" itemprop="url" rel="index"><span itemprop="name">技术/基本技能</span></a>
                </span>
            </span>

          
            <span id="/2020/07/05/basic_skills/plotly/statistical_charts/" class="post-meta-item leancloud_visitors" data-flag-title="统计类图表" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">评论：</span>
    
    <a title="valine" href="/2020/07/05/basic_skills/plotly/statistical_charts/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/05/basic_skills/plotly/statistical_charts/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>46k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>42 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705114624820.png" alt></p>
<a id="more"></a>
<h2 id="tong-ji-tu">统计图</h2>
<h2 id="wu-chai-tu-error-bar">误差图：error bar</h2>
<blockquote>
<p>Error bar 是在图像上表现数据误差范围的一种方式。对于含有误差项的数据，除了通常的 x 轴和 y 轴两列数据外，我们还需要有额外的误差数据列。</p>
<p>拿 x 数据列举例，如果误差用标准差 \(\sigma_x\)来表示，那么数据取值范围可以表示为\([x-\sigma_x,x+\sigma_x]\) ，这时候只要增加一列误差项就行了，所以一共需要 3 列数据。如果误差用最小值 \(x_{min}\) 和最大值 \(x_{max}\) 来表示，那么数据取值范围可以表示为 \([x_{min}, x_{max}]\)，这时候需要增加两列误差项，所以一共需要 4 列数据。对于 y 数据误差，表达方法和 x 类似。如果同时包含 x 和 y 误差，就需要把两者结合起来。</p>
</blockquote>
<h3 id="shi-yong-plotly-express-lai-hui-zhi">使用 Plotly Express 来绘制</h3>
<p>Plotly Express是Plotly的易于使用的高级界面，可处理多种类型的数据并生成易于样式化的图形。对于表示2D数据点的函数（例如px.scatter，px.line，px.bar等），误差栏以列名的形式给出，该列名是error_x和error_y。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line">df[<span class="string">"e"</span>] = df[<span class="string">"sepal_width"</span>]/<span class="number">100</span></span><br><span class="line">fig = px.scatter(df, x=<span class="string">"sepal_width"</span>, y=<span class="string">"sepal_length"</span>, color=<span class="string">"species"</span>,</span><br><span class="line">                 error_x=<span class="string">"e"</span>, error_y=<span class="string">"e"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705231233970.png" alt></p>
<h3 id="fei-dui-cheng-wu-chai">非对称误差</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line">df[<span class="string">"e_plus"</span>] = df[<span class="string">"sepal_width"</span>]/<span class="number">100</span></span><br><span class="line">df[<span class="string">"e_minus"</span>] = df[<span class="string">"sepal_width"</span>]/<span class="number">40</span></span><br><span class="line">fig = px.scatter(df, x=<span class="string">"sepal_width"</span>, y=<span class="string">"sepal_length"</span>, color=<span class="string">"species"</span>,</span><br><span class="line">                 error_y=<span class="string">"e_plus"</span>, error_y_minus=<span class="string">"e_minus"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705232439037.png" alt></p>
<h3 id="graph-objects-hui-zhi-error-bar">graph_objects 绘制Error Bar</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(</span><br><span class="line">    		data=go.Scatter(</span><br><span class="line">                x=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">                y=[<span class="number">6</span>, <span class="number">10</span>, <span class="number">2</span>],</span><br><span class="line">                error_y=dict(</span><br><span class="line">                    type=<span class="string">'data'</span>, <span class="comment"># value of error bar given in data coordinates</span></span><br><span class="line">                    array=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="comment"># 第一个误差为1，第二个误差为2，第三个误差为3</span></span><br><span class="line">                    visible=<span class="literal">True</span>)</span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705232736114.png" alt></p>
<h3 id="go-hui-zhi-fei-dui-cheng-error-bar">go:绘制非对称Error Bar</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">        x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        y=[<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        error_y=dict(</span><br><span class="line">            type=<span class="string">'data'</span>,</span><br><span class="line">            symmetric=<span class="literal">False</span>,</span><br><span class="line">            array=[<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.1</span>, <span class="number">0.1</span>],</span><br><span class="line">            arrayminus=[<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">1</span>, <span class="number">0.2</span>])</span><br><span class="line">        ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233203182.png" alt></p>
<h3 id="go-shi-yong-y-zhi-de-bai-fen-bi-zuo-wei-wu-chai">go:使用y 值的百分比作为误差</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">        x=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        y=[<span class="number">6</span>, <span class="number">10</span>, <span class="number">2</span>],</span><br><span class="line">        error_y=dict(</span><br><span class="line">            type=<span class="string">'percent'</span>, <span class="comment"># value of error bar given as percentage of y value</span></span><br><span class="line">            value=<span class="number">50</span>, <span class="comment"># 50%</span></span><br><span class="line">            visible=<span class="literal">True</span>)</span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233352773.png" alt></p>
<h3 id="go-heng-ding-pian-yi">go:恒定偏移</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">        x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        y=[<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        error_y=dict(</span><br><span class="line">            type=<span class="string">'percent'</span>,</span><br><span class="line">            symmetric=<span class="literal">False</span>,</span><br><span class="line">            value=<span class="number">15</span>, <span class="comment"># 上方偏移15%</span></span><br><span class="line">            valueminus=<span class="number">25</span>) <span class="comment"># 下方偏移25%</span></span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233530492.png" alt></p>
<h3 id="go-shui-ping-error-bar">go:水平 Error Bar</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">        x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        y=[<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        error_x=dict(</span><br><span class="line">            type=<span class="string">'percent'</span>,</span><br><span class="line">            value=<span class="number">10</span>)</span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233700876.png" alt></p>
<h3 id="go-dai-error-bar-de-zhu-zhuang-tu">go:带Error Bar的柱状图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    name=<span class="string">'Control'</span>,</span><br><span class="line">    x=[<span class="string">'Trial 1'</span>, <span class="string">'Trial 2'</span>, <span class="string">'Trial 3'</span>], y=[<span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>],</span><br><span class="line">    error_y=dict(type=<span class="string">'data'</span>, array=[<span class="number">1</span>, <span class="number">0.5</span>, <span class="number">1.5</span>])</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    name=<span class="string">'Experimental'</span>,</span><br><span class="line">    x=[<span class="string">'Trial 1'</span>, <span class="string">'Trial 2'</span>, <span class="string">'Trial 3'</span>], y=[<span class="number">4</span>, <span class="number">7</span>, <span class="number">3</span>],</span><br><span class="line">    error_y=dict(type=<span class="string">'data'</span>, array=[<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">))</span><br><span class="line">fig.update_layout(barmode=<span class="string">'group'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705233807973.png" alt></p>
<h3 id="go-yan-se-he-yang-shi">go:颜色和样式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x_theo = np.linspace(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">100</span>)</span><br><span class="line">sincx = np.sinc(x_theo)</span><br><span class="line">x = [<span class="number">-3.8</span>, <span class="number">-3.03</span>, <span class="number">-1.91</span>, <span class="number">-1.46</span>, <span class="number">-0.89</span>, <span class="number">-0.24</span>, <span class="number">-0.0</span>, <span class="number">0.41</span>, <span class="number">0.89</span>, <span class="number">1.01</span>, <span class="number">1.91</span>, <span class="number">2.28</span>, <span class="number">2.79</span>, <span class="number">3.56</span>]</span><br><span class="line">y = [<span class="number">-0.02</span>, <span class="number">0.04</span>, <span class="number">-0.01</span>, <span class="number">-0.27</span>, <span class="number">0.36</span>, <span class="number">0.75</span>, <span class="number">1.03</span>, <span class="number">0.65</span>, <span class="number">0.28</span>, <span class="number">0.02</span>, <span class="number">-0.11</span>, <span class="number">0.16</span>, <span class="number">0.04</span>, <span class="number">-0.15</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x_theo, y=sincx,</span><br><span class="line">    name=<span class="string">'sinc(x)'</span>,</span><br><span class="line"><span class="comment">#    mode='markers' # model 默认是lines</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x, y=y,</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    name=<span class="string">'measured'</span>,</span><br><span class="line">    error_y=dict(</span><br><span class="line">        type=<span class="string">'constant'</span>,</span><br><span class="line">        value=<span class="number">0.1</span>,</span><br><span class="line">        color=<span class="string">'purple'</span>,</span><br><span class="line">        thickness=<span class="number">1.5</span>,</span><br><span class="line">        width=<span class="number">3</span>,</span><br><span class="line">    ),</span><br><span class="line">    error_x=dict(</span><br><span class="line">        type=<span class="string">'constant'</span>,</span><br><span class="line">        value=<span class="number">0.2</span>,</span><br><span class="line">        color=<span class="string">'purple'</span>,</span><br><span class="line">        thickness=<span class="number">1.5</span>,</span><br><span class="line">        width=<span class="number">3</span>,</span><br><span class="line">    ),</span><br><span class="line">    marker=dict(color=<span class="string">'purple'</span>, size=<span class="number">8</span>)</span><br><span class="line">))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705234352322.png" alt></p>
<h2 id="he-tu-box">盒图 box</h2>
<p>盒图是在1977年由美国的统计学家约翰·图基(John Tukey)发明的。它由五个数值点组成：最小值(min)，下四分位数(Q1)，中位数(median)，上四分位数(Q3)，最大值(max)。也可以往盒图里面加入平均值(mean)。如下图。下四分位数、中位数、上四分位数组成一个“带有隔间的盒子”。上四分位数到最大值之间建立一条延伸线，这个延伸线成为“胡须(whisker)”。</p>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/o_boxplot.png" alt></p>
<p>由于现实数据中总是存在各式各样地“脏数据”，也成为“离群点”，于是为了不因这些少数的离群数据导致整体特征的偏移，将这些离群点单独汇出，而盒图中的胡须的两级修改成最小观测值与最大观测值。这里有个经验，就是最大(最小)观测值设置为与四分位数值间距离为1.5个IQR(中间四分位数极差)。即：</p>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/884095-20171009221403902-824833776.png" alt></p>
<p>IQR = Q3-Q1，即上四分位数与下四分位数之间的差，也就是盒子的长度。</p>
<ul>
<li>最小观测值为min = Q1 - 1.5*IQR，如果存在离群点小于最小观测值，则胡须下限为最小观测值，离群点单独以点汇出。如果没有比最小观测值小的数，则胡须下限为最小值。</li>
<li>最大观测值为max = Q3 -1.5*IQR，如果存在离群点大于最大观测值，则胡须上限为最大观测值，离群点单独以点汇出。如果没有比最大观测值大的数，则胡须上限为最大值。</li>
</ul>
<p>通过盒图，在分析数据的时候，盒图能够有效地帮助我们识别数据的特征：</p>
<ol>
<li>直观地识别数据集中的异常值(查看离群点)。</li>
<li>判断数据集的数据离散程度和偏向(观察盒子的长度，上下隔间的形状，以及胡须的长度)。</li>
</ol>
<h3 id="shi-yong-code-plotly-express-code-hui-zhi-xiang-xian-tu">使用<code>plotly.express</code>绘制箱线图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.box(df, y=<span class="string">"total_bill"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073450664.png" alt></p>
<h3 id="zhi-ding-lie-hui-zhi-duo-ge-xiang-xian-tu">指定列，绘制多个箱线图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.box(df, x=<span class="string">"time"</span>, y=<span class="string">"total_bill"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073718915.png" alt></p>
<h3 id="xian-shi-chi-san-de-dian">显示离散的点</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.box(df, x=<span class="string">"time"</span>, y=<span class="string">"total_bill"</span>, points=<span class="string">"all"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706073807119.png" alt></p>
<h3 id="xuan-ze-si-fen-wei-shu-ji-suan-suan-fa">选择四分位数计算算法</h3>
<p><code>exclude</code>算法使用中位数将有序数据集分为两半。如果样本是奇数，则不包括任何一半的中位数。那么Q1是下半部分的中位数，而Q3是上半部分的中位数。</p>
<p><code>include</code>算法使用中位数将有序数据集分为两半，但是如果样本为奇数，则将两个半部都包含中位数。那么，Q1是下半部分的中位数，Q3是上半部分的中位数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.box(df, x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, color=<span class="string">"smoker"</span>)</span><br><span class="line">fig.update_traces(quartilemethod=<span class="string">"exclusive"</span>) <span class="comment"># or "inclusive", or "linear" by default</span></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074257659.png" alt></p>
<h3 id="si-fen-wei-suan-fa-zhi-jian-de-chai-yi">四分位算法之间的差异</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">df = pd.DataFrame(dict(</span><br><span class="line">    linear=data,</span><br><span class="line">    inclusive=data,</span><br><span class="line">    exclusive=data</span><br><span class="line">)).melt(var_name=<span class="string">"quartilemethod"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = px.box(df, y=<span class="string">"value"</span>, facet_col=<span class="string">"quartilemethod"</span>, color=<span class="string">"quartilemethod"</span>,</span><br><span class="line">             boxmode=<span class="string">"overlay"</span>, points=<span class="string">'all'</span>) <span class="comment"># 模式：覆盖</span></span><br><span class="line"></span><br><span class="line">fig.update_traces(quartilemethod=<span class="string">"linear"</span>, jitter=<span class="number">0</span>, col=<span class="number">1</span>)</span><br><span class="line">fig.update_traces(quartilemethod=<span class="string">"inclusive"</span>, jitter=<span class="number">0</span>, col=<span class="number">2</span>)</span><br><span class="line">fig.update_traces(quartilemethod=<span class="string">"exclusive"</span>, jitter=<span class="number">0</span>, col=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074525542.png" alt></p>
<h3 id="xiang-xian-tu-de-yang-shi">箱线图的样式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.box(df, x=<span class="string">"time"</span>, y=<span class="string">"total_bill"</span>, color=<span class="string">"smoker"</span>,</span><br><span class="line">             notched=<span class="literal">True</span>, <span class="comment"># used notched shape</span></span><br><span class="line">             title=<span class="string">"Box plot of total bill"</span>,</span><br><span class="line">             hover_data=[<span class="string">"day"</span>] <span class="comment"># add day column to hover data</span></span><br><span class="line">            )</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>缺口箱线图</strong>（Notched Box Plot）：中位数的值用缺口表示，缺口的宽度可表示中位数的置信区间，方便比较几组数据中位数的差别。</p>
</blockquote>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074749153.png" alt></p>
<h3 id="shi-yong-graph-objects-hui-zhi-xiang-xian-tu">使用graph_objects绘制箱线图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">y0 = np.random.randn(<span class="number">50</span>) - <span class="number">1</span></span><br><span class="line">y1 = np.random.randn(<span class="number">50</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Box(y=y0))</span><br><span class="line">fig.add_trace(go.Box(y=y1))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706074916918.png" alt></p>
<h3 id="go-shui-ping-xiang-xian-tu">go:水平箱线图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x0 = np.random.randn(<span class="number">50</span>)</span><br><span class="line">x1 = np.random.randn(<span class="number">50</span>) + <span class="number">2</span> <span class="comment"># shift mean</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"><span class="comment"># Use x instead of y argument for horizontal plot</span></span><br><span class="line">fig.add_trace(go.Box(x=x0))</span><br><span class="line">fig.add_trace(go.Box(x=x1))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075003317.png" alt></p>
<h3 id="go-wei-shu-ju-tian-jia-pian-yi">go:为数据添加偏移</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Box(y=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>],</span><br><span class="line">            boxpoints=<span class="string">'all'</span>, <span class="comment"># can also be outliers, or suspectedoutliers, or False</span></span><br><span class="line">            jitter=<span class="number">0.3</span>, <span class="comment"># add some jitter for a better separation between points</span></span><br><span class="line">            pointpos=<span class="number">-1.8</span> <span class="comment"># relative position of points wrt box</span></span><br><span class="line">              )])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075201456.png" alt></p>
<h3 id="go-shi-yong-ji-suan-si-fen-wei-de-suan-fa">go:使用计算四分位的算法</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Box(y=data, quartilemethod=<span class="string">"linear"</span>, name=<span class="string">"Linear Quartile Mode"</span>))</span><br><span class="line">fig.add_trace(go.Box(y=data, quartilemethod=<span class="string">"inclusive"</span>, name=<span class="string">"Inclusive Quartile Mode"</span>))</span><br><span class="line">fig.add_trace(go.Box(y=data, quartilemethod=<span class="string">"exclusive"</span>, name=<span class="string">"Exclusive Quartile Mode"</span>))</span><br><span class="line">fig.update_traces(boxpoints=<span class="string">'all'</span>, jitter=<span class="number">0</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075259976.png" alt></p>
<h3 id="go-zhi-ding-de-si-fen-wei-shu">go:指定的四分位数</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box(y=[</span><br><span class="line">        [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">        [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">        [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ]</span><br><span class="line">      ], name=<span class="string">"Precompiled Quartiles"</span>))</span><br><span class="line"></span><br><span class="line">fig.update_traces(q1=[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ], median=[ <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> ],</span><br><span class="line">                  q3=[ <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ], lowerfence=[<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                  upperfence=[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>], mean=[ <span class="number">2.2</span>, <span class="number">2.8</span>, <span class="number">3.2</span> ],</span><br><span class="line">                  sd=[ <span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span> ], notchspan=[ <span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span> ] )</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075611496.png" alt></p>
<h3 id="go-zhao-se">go:着色</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">y0 = np.random.randn(<span class="number">50</span>)</span><br><span class="line">y1 = np.random.randn(<span class="number">50</span>) + <span class="number">1</span> <span class="comment"># shift mean</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Box(y=y0, name=<span class="string">'Sample A'</span>,</span><br><span class="line">                marker_color = <span class="string">'indianred'</span>))</span><br><span class="line">fig.add_trace(go.Box(y=y1, name = <span class="string">'Sample B'</span>,</span><br><span class="line">                marker_color = <span class="string">'lightseagreen'</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075649137.png" alt></p>
<h3 id="go-xian-shi-jun-zhi-he-fang-chai">go:显示均值和方差</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">2.37</span>, <span class="number">2.16</span>, <span class="number">4.82</span>, <span class="number">1.73</span>, <span class="number">1.04</span>, <span class="number">0.23</span>, <span class="number">1.32</span>, <span class="number">2.91</span>, <span class="number">0.11</span>, <span class="number">4.51</span>, <span class="number">0.51</span>, <span class="number">3.75</span>, <span class="number">1.35</span>, <span class="number">2.98</span>, <span class="number">4.50</span>, <span class="number">0.18</span>, <span class="number">4.66</span>, <span class="number">1.30</span>, <span class="number">2.06</span>, <span class="number">1.19</span>],</span><br><span class="line">    name=<span class="string">'Only Mean'</span>,</span><br><span class="line">    marker_color=<span class="string">'darkblue'</span>,</span><br><span class="line">    boxmean=<span class="literal">True</span> <span class="comment"># represent mean</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">2.37</span>, <span class="number">2.16</span>, <span class="number">4.82</span>, <span class="number">1.73</span>, <span class="number">1.04</span>, <span class="number">0.23</span>, <span class="number">1.32</span>, <span class="number">2.91</span>, <span class="number">0.11</span>, <span class="number">4.51</span>, <span class="number">0.51</span>, <span class="number">3.75</span>, <span class="number">1.35</span>, <span class="number">2.98</span>, <span class="number">4.50</span>, <span class="number">0.18</span>, <span class="number">4.66</span>, <span class="number">1.30</span>, <span class="number">2.06</span>, <span class="number">1.19</span>],</span><br><span class="line">    name=<span class="string">'Mean &amp; SD'</span>,</span><br><span class="line">    marker_color=<span class="string">'royalblue'</span>,</span><br><span class="line">    boxmean=<span class="string">'sd'</span> <span class="comment"># represent mean and standard deviation</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706075836720.png" alt></p>
<h3 id="go-chi-qun-dian">go:离群点</h3>
<p>下面的示例显示如何使用boxpoints参数。如果为<code>outliers</code>，则仅显示位于箱线图外部的采样点。如果为<code>suspectedoutliers</code>，则显示离群点，并突出显示小于4Q1-3Q3或大于4Q3-3Q1的点（使用离群颜色）。如果为<code>all</code>，则显示所有采样点。如果为<code>False</code>，则仅显示没有样本点的框。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import plotly.graph_objects as go</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.75</span>, <span class="number">5.25</span>, <span class="number">5.5</span>, <span class="number">6</span>, <span class="number">6.2</span>, <span class="number">6.6</span>, <span class="number">6.80</span>, <span class="number">7.0</span>, <span class="number">7.2</span>, <span class="number">7.5</span>, <span class="number">7.5</span>, <span class="number">7.75</span>, <span class="number">8.15</span>,</span><br><span class="line">       <span class="number">8.15</span>, <span class="number">8.65</span>, <span class="number">8.93</span>, <span class="number">9.2</span>, <span class="number">9.5</span>, <span class="number">10</span>, <span class="number">10.25</span>, <span class="number">11.5</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">20.90</span>, <span class="number">22.3</span>, <span class="number">23.25</span>],</span><br><span class="line">    name=<span class="string">"All Points"</span>,</span><br><span class="line">    jitter=<span class="number">0.3</span>,</span><br><span class="line">    pointpos=<span class="number">-1.8</span>,</span><br><span class="line">    boxpoints='all', # represent all points</span><br><span class="line">    marker_color='rgb(<span class="number">7</span>,<span class="number">40</span>,<span class="number">89</span>)',</span><br><span class="line">    line_color='rgb(<span class="number">7</span>,<span class="number">40</span>,<span class="number">89</span>)'</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.75</span>, <span class="number">5.25</span>, <span class="number">5.5</span>, <span class="number">6</span>, <span class="number">6.2</span>, <span class="number">6.6</span>, <span class="number">6.80</span>, <span class="number">7.0</span>, <span class="number">7.2</span>, <span class="number">7.5</span>, <span class="number">7.5</span>, <span class="number">7.75</span>, <span class="number">8.15</span>,</span><br><span class="line">        <span class="number">8.15</span>, <span class="number">8.65</span>, <span class="number">8.93</span>, <span class="number">9.2</span>, <span class="number">9.5</span>, <span class="number">10</span>, <span class="number">10.25</span>, <span class="number">11.5</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">20.90</span>, <span class="number">22.3</span>, <span class="number">23.25</span>],</span><br><span class="line">    name=<span class="string">"Only Whiskers"</span>,</span><br><span class="line">    boxpoints=False, # no data points</span><br><span class="line">    marker_color='rgb(<span class="number">9</span>,<span class="number">56</span>,<span class="number">125</span>)',</span><br><span class="line">    line_color='rgb(<span class="number">9</span>,<span class="number">56</span>,<span class="number">125</span>)'</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.75</span>, <span class="number">5.25</span>, <span class="number">5.5</span>, <span class="number">6</span>, <span class="number">6.2</span>, <span class="number">6.6</span>, <span class="number">6.80</span>, <span class="number">7.0</span>, <span class="number">7.2</span>, <span class="number">7.5</span>, <span class="number">7.5</span>, <span class="number">7.75</span>, <span class="number">8.15</span>,</span><br><span class="line">        <span class="number">8.15</span>, <span class="number">8.65</span>, <span class="number">8.93</span>, <span class="number">9.2</span>, <span class="number">9.5</span>, <span class="number">10</span>, <span class="number">10.25</span>, <span class="number">11.5</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">20.90</span>, <span class="number">22.3</span>, <span class="number">23.25</span>],</span><br><span class="line">    name=<span class="string">"Suspected Outliers"</span>,</span><br><span class="line">    boxpoints='suspectedoutliers', # only suspected outliers</span><br><span class="line">    marker=dict(</span><br><span class="line">        color='rgb(<span class="number">8</span>,<span class="number">81</span>,<span class="number">156</span>)',</span><br><span class="line">        outliercolor='rgba(<span class="number">219</span>, <span class="number">64</span>, <span class="number">82</span>, <span class="number">0.6</span>)',</span><br><span class="line">        line=dict(</span><br><span class="line">            outliercolor='rgba(<span class="number">219</span>, <span class="number">64</span>, <span class="number">82</span>, <span class="number">0.6</span>)',</span><br><span class="line">            outlierwidth=<span class="number">2</span>)),</span><br><span class="line">    line_color='rgb(<span class="number">8</span>,<span class="number">81</span>,<span class="number">156</span>)'</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.75</span>, <span class="number">5.25</span>, <span class="number">5.5</span>, <span class="number">6</span>, <span class="number">6.2</span>, <span class="number">6.6</span>, <span class="number">6.80</span>, <span class="number">7.0</span>, <span class="number">7.2</span>, <span class="number">7.5</span>, <span class="number">7.5</span>, <span class="number">7.75</span>, <span class="number">8.15</span>,</span><br><span class="line">        <span class="number">8.15</span>, <span class="number">8.65</span>, <span class="number">8.93</span>, <span class="number">9.2</span>, <span class="number">9.5</span>, <span class="number">10</span>, <span class="number">10.25</span>, <span class="number">11.5</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">20.90</span>, <span class="number">22.3</span>, <span class="number">23.25</span>],</span><br><span class="line">    name=<span class="string">"Whiskers and Outliers"</span>,</span><br><span class="line">    boxpoints='outliers', # only outliers</span><br><span class="line">    marker_color='rgb(<span class="number">107</span>,<span class="number">174</span>,<span class="number">214</span>)',</span><br><span class="line">    line_color='rgb(<span class="number">107</span>,<span class="number">174</span>,<span class="number">214</span>)'</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(title_text=<span class="string">"Box Plot Styling Outliers"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080051349.png" alt></p>
<h3 id="go-xiang-xian-tu-zu">go:箱线图组</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x = [<span class="string">'day 1'</span>, <span class="string">'day 1'</span>, <span class="string">'day 1'</span>, <span class="string">'day 1'</span>, <span class="string">'day 1'</span>, <span class="string">'day 1'</span>,</span><br><span class="line">     <span class="string">'day 2'</span>, <span class="string">'day 2'</span>, <span class="string">'day 2'</span>, <span class="string">'day 2'</span>, <span class="string">'day 2'</span>, <span class="string">'day 2'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.6</span>, <span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">0.4</span>, <span class="number">0.2</span>, <span class="number">0.7</span>, <span class="number">0.9</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.3</span>],</span><br><span class="line">    x=x,</span><br><span class="line">    name=<span class="string">'kale'</span>,</span><br><span class="line">    marker_color=<span class="string">'#3D9970'</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.6</span>, <span class="number">0.7</span>, <span class="number">0.3</span>, <span class="number">0.6</span>, <span class="number">0.0</span>, <span class="number">0.5</span>, <span class="number">0.7</span>, <span class="number">0.9</span>, <span class="number">0.5</span>, <span class="number">0.8</span>, <span class="number">0.7</span>, <span class="number">0.2</span>],</span><br><span class="line">    x=x,</span><br><span class="line">    name=<span class="string">'radishes'</span>,</span><br><span class="line">    marker_color=<span class="string">'#FF4136'</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Box(</span><br><span class="line">    y=[<span class="number">0.1</span>, <span class="number">0.3</span>, <span class="number">0.1</span>, <span class="number">0.9</span>, <span class="number">0.6</span>, <span class="number">0.6</span>, <span class="number">0.9</span>, <span class="number">1.0</span>, <span class="number">0.3</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">0.5</span>],</span><br><span class="line">    x=x,</span><br><span class="line">    name=<span class="string">'carrots'</span>,</span><br><span class="line">    marker_color=<span class="string">'#FF851B'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    yaxis_title=<span class="string">'normalized moisture'</span>,</span><br><span class="line">    boxmode=<span class="string">'group'</span> <span class="comment"># group together boxes of the different traces for each value of x</span></span><br><span class="line">)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080326188.png" alt></p>
<h3 id="go-cai-hong-xiang-xian-tu">go:彩虹箱线图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">N = <span class="number">30</span>     <span class="comment"># Number of boxes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># generate an array of rainbow colors by fixing the saturation and lightness of the HSL</span></span><br><span class="line"><span class="comment"># representation of colour and marching around the hue.</span></span><br><span class="line"><span class="comment"># Plotly accepts any CSS color format, see e.g. http://www.w3schools.com/cssref/css_colors_legal.asp.</span></span><br><span class="line">c = [<span class="string">'hsl('</span>+str(h)+<span class="string">',50%'</span>+<span class="string">',50%)'</span> <span class="keyword">for</span> h <span class="keyword">in</span> np.linspace(<span class="number">0</span>, <span class="number">360</span>, N)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Each box is represented by a dict that contains the data, the type, and the colour.</span></span><br><span class="line"><span class="comment"># Use list comprehension to describe N boxes, each with a different colour and with different randomly generated data:</span></span><br><span class="line">fig = go.Figure(data=[go.Box(</span><br><span class="line">    y=<span class="number">3.5</span> * np.sin(np.pi * i/N) + i/N + (<span class="number">1.5</span> + <span class="number">0.5</span> * np.cos(np.pi*i/N)) * np.random.rand(<span class="number">10</span>),</span><br><span class="line">    marker_color=c[i]</span><br><span class="line">    ) <span class="keyword">for</span> i <span class="keyword">in</span> range(int(N))])</span><br><span class="line"></span><br><span class="line"><span class="comment"># format the layout</span></span><br><span class="line">fig.update_layout(</span><br><span class="line">    xaxis=dict(showgrid=<span class="literal">False</span>, zeroline=<span class="literal">False</span>, showticklabels=<span class="literal">False</span>),</span><br><span class="line">    yaxis=dict(zeroline=<span class="literal">False</span>, gridcolor=<span class="string">'white'</span>),</span><br><span class="line">    paper_bgcolor=<span class="string">'rgb(233,233,233)'</span>,</span><br><span class="line">    plot_bgcolor=<span class="string">'rgb(233,233,233)'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080428043.png" alt></p>
<h3 id="code-example">code example</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x_data = [<span class="string">'Carmelo Anthony'</span>, <span class="string">'Dwyane Wade'</span>,</span><br><span class="line">          <span class="string">'Deron Williams'</span>, <span class="string">'Brook Lopez'</span>,</span><br><span class="line">          <span class="string">'Damian Lillard'</span>, <span class="string">'David West'</span>,]</span><br><span class="line"></span><br><span class="line">N = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">y0 = (<span class="number">10</span> * np.random.randn(N) + <span class="number">30</span>).astype(np.int)</span><br><span class="line">y1 = (<span class="number">13</span> * np.random.randn(N) + <span class="number">38</span>).astype(np.int)</span><br><span class="line">y2 = (<span class="number">11</span> * np.random.randn(N) + <span class="number">33</span>).astype(np.int)</span><br><span class="line">y3 = (<span class="number">9</span> * np.random.randn(N) + <span class="number">36</span>).astype(np.int)</span><br><span class="line">y4 = (<span class="number">15</span> * np.random.randn(N) + <span class="number">31</span>).astype(np.int)</span><br><span class="line">y5 = (<span class="number">12</span> * np.random.randn(N) + <span class="number">40</span>).astype(np.int)</span><br><span class="line"></span><br><span class="line">y_data = [y0, y1, y2, y3, y4, y5]</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">'rgba(93, 164, 214, 0.5)'</span>, <span class="string">'rgba(255, 144, 14, 0.5)'</span>, <span class="string">'rgba(44, 160, 101, 0.5)'</span>,</span><br><span class="line">          <span class="string">'rgba(255, 65, 54, 0.5)'</span>, <span class="string">'rgba(207, 114, 255, 0.5)'</span>, <span class="string">'rgba(127, 96, 0, 0.5)'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> xd, yd, cls <span class="keyword">in</span> zip(x_data, y_data, colors):</span><br><span class="line">        fig.add_trace(go.Box(</span><br><span class="line">            y=yd,</span><br><span class="line">            name=xd,</span><br><span class="line">            boxpoints=<span class="string">'all'</span>,</span><br><span class="line">            jitter=<span class="number">0.5</span>,</span><br><span class="line">            whiskerwidth=<span class="number">0.2</span>,</span><br><span class="line">            fillcolor=cls,</span><br><span class="line">            marker_size=<span class="number">2</span>,</span><br><span class="line">            line_width=<span class="number">1</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Points Scored by the Top 9 Scoring NBA Players in 2012'</span>,</span><br><span class="line">    yaxis=dict(</span><br><span class="line">        autorange=<span class="literal">True</span>,</span><br><span class="line">        showgrid=<span class="literal">True</span>,</span><br><span class="line">        zeroline=<span class="literal">True</span>,</span><br><span class="line">        dtick=<span class="number">5</span>,</span><br><span class="line">        gridcolor=<span class="string">'rgb(255, 255, 255)'</span>,</span><br><span class="line">        gridwidth=<span class="number">1</span>,</span><br><span class="line">        zerolinecolor=<span class="string">'rgb(255, 255, 255)'</span>,</span><br><span class="line">        zerolinewidth=<span class="number">2</span>,</span><br><span class="line">    ),</span><br><span class="line">    margin=dict(</span><br><span class="line">        l=<span class="number">40</span>,</span><br><span class="line">        r=<span class="number">30</span>,</span><br><span class="line">        b=<span class="number">80</span>,</span><br><span class="line">        t=<span class="number">100</span>,</span><br><span class="line">    ),</span><br><span class="line">    paper_bgcolor=<span class="string">'rgb(243, 243, 243)'</span>,</span><br><span class="line">    plot_bgcolor=<span class="string">'rgb(243, 243, 243)'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706080538915.png" alt></p>
<h2 id="zhi-fang-tu-histograms">直方图：Histograms</h2>
<p>在统计中，直方图表示数值数据的分布，其中将数据进行装仓(bin)并表示每个仓的计数。直方图是一种聚合的条形图，具有几种可能的聚合函数（例如，总和，平均值，计数…）。而且，要合并的数据可以是数字数据，也可以是分类数据或日期数据。</p>
<h3 id="shi-yong-plotly-express-hui-zhi-zhi-fang-tu">使用Plotly Express绘制直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706194745710.png" alt></p>
<h3 id="she-zhi-bin-de-shu-liang">设置bin的数量</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, nbins=<span class="number">20</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706194851212.png" alt></p>
<h3 id="gen-ju-y-de-tong-ji-zuo-zhi-fang-tu">根据y的统计做直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line"><span class="comment"># create the bins</span></span><br><span class="line">counts, bins = np.histogram(df.total_bill, bins=range(<span class="number">0</span>, <span class="number">60</span>, <span class="number">5</span>))</span><br><span class="line">bins = <span class="number">0.5</span> * (bins[:<span class="number">-1</span>] + bins[<span class="number">1</span>:])</span><br><span class="line"></span><br><span class="line">fig = px.bar(x=bins, y=counts, labels=&#123;<span class="string">'x'</span>:<span class="string">'total_bill'</span>, <span class="string">'y'</span>:<span class="string">'count'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706195835189.png" alt></p>
<h3 id="shi-yong-bai-fen-bi">使用百分比</h3>
<p>默认是使用每个bin的样本数，使用histnorm参数，可以表示每个bin中样本的百分比或分数，或者表示密度直方图，或概率密度直方图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, histnorm=<span class="string">'probability density'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200216514.png" alt></p>
<h3 id="zhi-fang-tu-de-wai-guan">直方图的外观</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>,</span><br><span class="line">                   title=<span class="string">'Histogram of bills'</span>,</span><br><span class="line">                   labels=&#123;<span class="string">'total_bill'</span>:<span class="string">'total bill'</span>&#125;, <span class="comment"># can specify one label per df column</span></span><br><span class="line">                   opacity=<span class="number">0.8</span>,</span><br><span class="line">                   log_y=<span class="literal">True</span>, <span class="comment"># represent bars with log scale</span></span><br><span class="line">                   color_discrete_sequence=[<span class="string">'indianred'</span>] <span class="comment"># color of histogram bars</span></span><br><span class="line">                   )</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200404134.png" alt></p>
<h3 id="zhong-die-zhi-fang-tu">重叠直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, color=<span class="string">"sex"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200500652.png" alt></p>
<h3 id="shi-yong-zhi-fang-tu-han-shu-histfunc">使用直方图函数：histfunc</h3>
<p>对于x的每个bin，可以使用histfunc计算数据的函数。 histfunc的参数是指定为y参数的dataframe列。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, histfunc=<span class="string">'avg'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200715716.png" alt></p>
<h3 id="fen-bu-zi-tu">分布子图</h3>
<p>使用marginal关键字，会在直方图旁边绘制子图，以可视化分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, color=<span class="string">"sex"</span>, marginal=<span class="string">"rug"</span>, <span class="comment"># can be `box`, `violin`</span></span><br><span class="line">                         hover_data=df.columns)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706200844987.png" alt></p>
<h3 id="shi-yong-go-histogram-hui-zhi-zhi-fang-tu">使用go.Histogram绘制直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Histogram(x=x)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201001825.png" alt></p>
<h3 id="go-shi-yong-bai-fen-bi">go:使用百分比</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">500</span>)</span><br><span class="line">fig = go.Figure(data=[go.Histogram(x=x, histnorm=<span class="string">'probability'</span>)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201109511.png" alt></p>
<h3 id="go-shui-ping-zhi-fang-tu">go:水平直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">y = np.random.randn(<span class="number">500</span>)</span><br><span class="line"><span class="comment"># Use `y` argument instead of `x` for horizontal histogram</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Histogram(y=y)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201153754.png" alt></p>
<h3 id="go-zhong-die-zhi-fang-tu">go:重叠直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x0 = np.random.randn(<span class="number">500</span>)</span><br><span class="line"><span class="comment"># Add 1 to shift the mean of the Gaussian distribution</span></span><br><span class="line">x1 = np.random.randn(<span class="number">500</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Histogram(x=x0))</span><br><span class="line">fig.add_trace(go.Histogram(x=x1))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Overlay both histograms</span></span><br><span class="line">fig.update_layout(barmode=<span class="string">'overlay'</span>)</span><br><span class="line"><span class="comment"># Reduce opacity to see both histograms</span></span><br><span class="line">fig.update_traces(opacity=<span class="number">0.75</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201322488.png" alt></p>
<h3 id="go-dui-die-zhi-fang-tu">go:堆叠直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x0 = np.random.randn(<span class="number">2000</span>)</span><br><span class="line">x1 = np.random.randn(<span class="number">2000</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Histogram(x=x0))</span><br><span class="line">fig.add_trace(go.Histogram(x=x1))</span><br><span class="line"></span><br><span class="line"><span class="comment"># The two histograms are drawn on top of another</span></span><br><span class="line">fig.update_layout(barmode=<span class="string">'stack'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201757626.png" alt></p>
<h3 id="go-zhi-fang-tu-yang-shi">go:直方图样式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">x0 = np.random.randn(<span class="number">500</span>)</span><br><span class="line">x1 = np.random.randn(<span class="number">500</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Histogram(</span><br><span class="line">    x=x0,</span><br><span class="line">    histnorm=<span class="string">'percent'</span>,</span><br><span class="line">    name=<span class="string">'control'</span>, <span class="comment"># name used in legend and hover labels</span></span><br><span class="line">    xbins=dict( <span class="comment"># bins used for histogram</span></span><br><span class="line">        start=<span class="number">-4.0</span>,</span><br><span class="line">        end=<span class="number">3.0</span>,</span><br><span class="line">        size=<span class="number">0.5</span></span><br><span class="line">    ),</span><br><span class="line">    marker_color=<span class="string">'#EB89B5'</span>,</span><br><span class="line">    opacity=<span class="number">0.75</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Histogram(</span><br><span class="line">    x=x1,</span><br><span class="line">    histnorm=<span class="string">'percent'</span>,</span><br><span class="line">    name=<span class="string">'experimental'</span>,</span><br><span class="line">    xbins=dict(</span><br><span class="line">        start=<span class="number">-3.0</span>,</span><br><span class="line">        end=<span class="number">4</span>,</span><br><span class="line">        size=<span class="number">0.5</span></span><br><span class="line">    ),</span><br><span class="line">    marker_color=<span class="string">'#330C73'</span>,</span><br><span class="line">    opacity=<span class="number">0.75</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title_text=<span class="string">'Sampled Results'</span>, <span class="comment"># title of plot</span></span><br><span class="line">    xaxis_title_text=<span class="string">'Value'</span>, <span class="comment"># xaxis label</span></span><br><span class="line">    yaxis_title_text=<span class="string">'Count'</span>, <span class="comment"># yaxis label</span></span><br><span class="line">    bargap=<span class="number">0.2</span>, <span class="comment"># gap between bars of adjacent location coordinates</span></span><br><span class="line">    bargroupgap=<span class="number">0.1</span> <span class="comment"># gap between bars of the same location coordinates</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706201905651.png" alt></p>
<h3 id="go-lei-ji-zhi-fang-tu">go:累积直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">500</span>)</span><br><span class="line">fig = go.Figure(data=[go.Histogram(x=x, cumulative_enabled=<span class="literal">True</span>)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706203205427.png" alt></p>
<h3 id="go-zhi-ding-ju-he-han-shu">go:指定聚合函数</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x = [<span class="string">"Apples"</span>,<span class="string">"Apples"</span>,<span class="string">"Apples"</span>,<span class="string">"Oranges"</span>, <span class="string">"Bananas"</span>]</span><br><span class="line">y = [<span class="string">"5"</span>,<span class="string">"10"</span>,<span class="string">"3"</span>,<span class="string">"10"</span>,<span class="string">"5"</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Histogram(histfunc=<span class="string">"count"</span>, y=y, x=x, name=<span class="string">"count"</span>))</span><br><span class="line">fig.add_trace(go.Histogram(histfunc=<span class="string">"sum"</span>, y=y, x=x, name=<span class="string">"sum"</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706203928893.png" alt></p>
<h3 id="go-zi-ding-yi-bin">go:自定义bin</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"></span><br><span class="line">x = [<span class="string">'1970-01-01'</span>, <span class="string">'1970-01-01'</span>, <span class="string">'1970-02-01'</span>, <span class="string">'1970-04-01'</span>, <span class="string">'1970-01-02'</span>,</span><br><span class="line">     <span class="string">'1972-01-31'</span>, <span class="string">'1970-02-13'</span>, <span class="string">'1971-04-19'</span>]</span><br><span class="line"></span><br><span class="line">fig = make_subplots(rows=<span class="number">3</span>, cols=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">trace0 = go.Histogram(x=x, nbinsx=<span class="number">4</span>)</span><br><span class="line">trace1 = go.Histogram(x=x, nbinsx = <span class="number">8</span>)</span><br><span class="line">trace2 = go.Histogram(x=x, nbinsx=<span class="number">10</span>)</span><br><span class="line">trace3 = go.Histogram(x=x,</span><br><span class="line">                      xbins=dict(</span><br><span class="line">                      start=<span class="string">'1969-11-15'</span>,</span><br><span class="line">                      end=<span class="string">'1972-03-31'</span>,</span><br><span class="line">                      size=<span class="string">'M18'</span>), <span class="comment"># M18 stands for 18 months</span></span><br><span class="line">                      autobinx=<span class="literal">False</span></span><br><span class="line">                     )</span><br><span class="line">trace4 = go.Histogram(x=x,</span><br><span class="line">                      xbins=dict(</span><br><span class="line">                      start=<span class="string">'1969-11-15'</span>,</span><br><span class="line">                      end=<span class="string">'1972-03-31'</span>,</span><br><span class="line">                      size=<span class="string">'M4'</span>), <span class="comment"># 4 months bin size</span></span><br><span class="line">                      autobinx=<span class="literal">False</span></span><br><span class="line">                      )</span><br><span class="line">trace5 = go.Histogram(x=x,</span><br><span class="line">                      xbins=dict(</span><br><span class="line">                      start=<span class="string">'1969-11-15'</span>,</span><br><span class="line">                      end=<span class="string">'1972-03-31'</span>,</span><br><span class="line">                      size= <span class="string">'M2'</span>), <span class="comment"># 2 months</span></span><br><span class="line">                      autobinx = <span class="literal">False</span></span><br><span class="line">                      )</span><br><span class="line"></span><br><span class="line">fig.append_trace(trace0, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace1, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.append_trace(trace2, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace3, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">fig.append_trace(trace4, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace5, <span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204102438.png" alt></p>
<h3 id="go-tiao-xing-tu-he-zhi-fang-tu-bi-jiao">go：条形图和直方图比较</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig1 = px.bar(df, x=<span class="string">'day'</span>, y=<span class="string">'tip'</span>, height=<span class="number">300</span>,</span><br><span class="line">              title=<span class="string">'Stacked Bar Chart - Hover on individual items'</span>)</span><br><span class="line">fig2 = px.histogram(df, x=<span class="string">'day'</span>, y=<span class="string">'tip'</span>, histfunc=<span class="string">'sum'</span>, height=<span class="number">300</span>,</span><br><span class="line">                    title=<span class="string">'Histogram Chart'</span>)</span><br><span class="line">fig1.show()</span><br><span class="line">fig2.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204350809.png" alt></p>
<h3 id="go-zhong-die-zhi-fang-tu-1">go:重叠直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram(</span><br><span class="line">    x=np.random.randint(<span class="number">7</span>, size=<span class="number">100</span>),</span><br><span class="line">    bingroup=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Histogram(</span><br><span class="line">    x=np.random.randint(<span class="number">7</span>, size=<span class="number">20</span>),</span><br><span class="line">    bingroup=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    barmode=<span class="string">"overlay"</span>,</span><br><span class="line">    bargap=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706204757175.png" alt></p>
<h2 id="fen-bu-tu-distplots">分布图(Distplots)</h2>
<p>用图形表示统计分布的几种表示形式:直方图，小提琴图，箱形图。也可以在同一图中组合多个表示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">"sex"</span>, marginal=<span class="string">"rug"</span>,</span><br><span class="line">                   hover_data=df.columns)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115242906.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">"sex"</span>,</span><br><span class="line">                   marginal=<span class="string">"box"</span>, <span class="comment"># or violin, rug</span></span><br><span class="line">                   hover_data=df.columns)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115353642.png" alt></p>
<h3 id="shi-yong-distplot-figure-factory-lai-zu-he-duo-chong-tu">使用distplot figure factory 来组合多种图</h3>
<p>包含：A histogram, a kde plot and a rug plot</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">1000</span>)</span><br><span class="line">hist_data = [x]</span><br><span class="line">group_labels = [<span class="string">'distplot'</span>] <span class="comment"># name of the dataset</span></span><br><span class="line"></span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115710770.png" alt></p>
<h3 id="duo-zu-shu-ju">多组数据</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add histogram data</span></span><br><span class="line">x1 = np.random.randn(<span class="number">200</span>) - <span class="number">2</span></span><br><span class="line">x2 = np.random.randn(<span class="number">200</span>)</span><br><span class="line">x3 = np.random.randn(<span class="number">200</span>) + <span class="number">2</span></span><br><span class="line">x4 = np.random.randn(<span class="number">200</span>) + <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Group data together</span></span><br><span class="line">hist_data = [x1, x2, x3, x4]</span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'Group 1'</span>, <span class="string">'Group 2'</span>, <span class="string">'Group 3'</span>, <span class="string">'Group 4'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with custom bin_size</span></span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels, bin_size=<span class="number">.2</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705115927252.png" alt></p>
<h3 id="she-zhi-bin-de-kuan-du">设置bin的宽度</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add histogram data</span></span><br><span class="line">x1 = np.random.randn(<span class="number">200</span>)<span class="number">-2</span></span><br><span class="line">x2 = np.random.randn(<span class="number">200</span>)</span><br><span class="line">x3 = np.random.randn(<span class="number">200</span>)+<span class="number">2</span></span><br><span class="line">x4 = np.random.randn(<span class="number">200</span>)+<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Group data together</span></span><br><span class="line">hist_data = [x1, x2, x3, x4]</span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'Group 1'</span>, <span class="string">'Group 2'</span>, <span class="string">'Group 3'</span>, <span class="string">'Group 4'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with custom bin_size</span></span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels, bin_size=[<span class="number">.1</span>, <span class="number">.25</span>, <span class="number">.5</span>, <span class="number">1</span>])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120100641.png" alt></p>
<h3 id="she-zhi-wen-ben-yan-se-he-biao-ti">设置文本颜色和标题</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x1 = np.random.randn(<span class="number">26</span>)</span><br><span class="line">x2 = np.random.randn(<span class="number">26</span>) + <span class="number">.5</span></span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'2014'</span>, <span class="string">'2015'</span>]</span><br><span class="line"></span><br><span class="line">rug_text_one = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>, <span class="string">'h'</span>, <span class="string">'i'</span>, <span class="string">'j'</span>,</span><br><span class="line">                <span class="string">'k'</span>, <span class="string">'l'</span>, <span class="string">'m'</span>, <span class="string">'n'</span>, <span class="string">'o'</span>, <span class="string">'p'</span>, <span class="string">'q'</span>, <span class="string">'r'</span>, <span class="string">'s'</span>, <span class="string">'t'</span>,</span><br><span class="line">                <span class="string">'u'</span>, <span class="string">'v'</span>, <span class="string">'w'</span>, <span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'z'</span>]</span><br><span class="line"></span><br><span class="line">rug_text_two = [<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>, <span class="string">'dd'</span>, <span class="string">'ee'</span>, <span class="string">'ff'</span>, <span class="string">'gg'</span>, <span class="string">'hh'</span>, <span class="string">'ii'</span>, <span class="string">'jj'</span>,</span><br><span class="line">                <span class="string">'kk'</span>, <span class="string">'ll'</span>, <span class="string">'mm'</span>, <span class="string">'nn'</span>, <span class="string">'oo'</span>, <span class="string">'pp'</span>, <span class="string">'qq'</span>, <span class="string">'rr'</span>, <span class="string">'ss'</span>, <span class="string">'tt'</span>,</span><br><span class="line">                <span class="string">'uu'</span>, <span class="string">'vv'</span>, <span class="string">'ww'</span>, <span class="string">'xx'</span>, <span class="string">'yy'</span>, <span class="string">'zz'</span>]</span><br><span class="line"></span><br><span class="line">rug_text = [rug_text_one, rug_text_two] <span class="comment"># for hover in rug plot</span></span><br><span class="line">colors = [<span class="string">'rgb(0, 0, 100)'</span>, <span class="string">'rgb(0, 200, 200)'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with custom bin_size</span></span><br><span class="line">fig = ff.create_distplot(</span><br><span class="line">    [x1, x2], group_labels, bin_size=<span class="number">.2</span>,</span><br><span class="line">    rug_text=rug_text, colors=colors)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title_text=<span class="string">'Customized Distplot'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120208449.png" alt></p>
<h3 id="hui-zhi-zheng-tai-qu-xian">绘制正态曲线</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x1 = np.random.randn(<span class="number">200</span>)</span><br><span class="line">x2 = np.random.randn(<span class="number">200</span>) + <span class="number">2</span></span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'Group 1'</span>, <span class="string">'Group 2'</span>]</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">'slategray'</span>, <span class="string">'magenta'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with curve_type set to 'normal'</span></span><br><span class="line">fig = ff.create_distplot([x1, x2], group_labels, bin_size=<span class="number">.5</span>,</span><br><span class="line">                         curve_type=<span class="string">'normal'</span>, <span class="comment"># override default 'kde'</span></span><br><span class="line">                         colors=colors)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add title</span></span><br><span class="line">fig.update_layout(title_text=<span class="string">'Distplot with Normal Distribution'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120435602.png" alt></p>
<h3 id="zhi-hui-zhi-curve-he-rug">只绘制Curve 和 Rug</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x1 = np.random.randn(<span class="number">200</span>) - <span class="number">1</span></span><br><span class="line">x2 = np.random.randn(<span class="number">200</span>)</span><br><span class="line">x3 = np.random.randn(<span class="number">200</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">hist_data = [x1, x2, x3]</span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'Group 1'</span>, <span class="string">'Group 2'</span>, <span class="string">'Group 3'</span>]</span><br><span class="line">colors = [<span class="string">'#333F44'</span>, <span class="string">'#37AA9C'</span>, <span class="string">'#94F3E4'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with curve_type set to 'normal'</span></span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels, show_hist=<span class="literal">False</span>, colors=colors)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add title</span></span><br><span class="line">fig.update_layout(title_text=<span class="string">'Curve and Rug Plot'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120551398.png" alt></p>
<h3 id="zhi-hui-zhi-hist-he-rug">只绘制Hist 和 Rug</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x1 = np.random.randn(<span class="number">200</span>) - <span class="number">1</span></span><br><span class="line">x2 = np.random.randn(<span class="number">200</span>)</span><br><span class="line">x3 = np.random.randn(<span class="number">200</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">hist_data = [x1, x2, x3]</span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">'Group 1'</span>, <span class="string">'Group 2'</span>, <span class="string">'Group 3'</span>]</span><br><span class="line">colors = [<span class="string">'#835AF1'</span>, <span class="string">'#7FA6EE'</span>, <span class="string">'#B8F7D4'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create distplot with curve_type set to 'normal'</span></span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels, colors=colors, bin_size=<span class="number">.25</span>,</span><br><span class="line">                         show_curve=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add title</span></span><br><span class="line">fig.update_layout(title_text=<span class="string">'Hist and Rug Plot'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120709229.png" alt></p>
<h3 id="shi-yong-pandas">使用pandas</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">'2012'</span>: np.random.randn(<span class="number">200</span>),</span><br><span class="line">                   <span class="string">'2013'</span>: np.random.randn(<span class="number">200</span>)+<span class="number">1</span>&#125;)</span><br><span class="line">fig = ff.create_distplot([df[c] <span class="keyword">for</span> c <span class="keyword">in</span> df.columns], df.columns, bin_size=<span class="number">.25</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200705120804496.png" alt></p>
<p><a href="https://plotly.com/python-api-reference/generated/plotly.figure_factory.create_distplot.html" target="_blank" rel="noopener">ff.create_distplot()</a></p>
<h2 id="re-li-tu-2-d-histograms-density-heatmaps">热力图：2D Histograms/Density Heatmaps</h2>
<p>密度热图，是直方图的二维概括，它类似于热图，但通过将由其x和y坐标指定的一组点分组到bin中并应用诸如计数或求和（如果提供了z），以计算代表bin的图块的颜色。</p>
<h3 id="shi-yong-plotly-express-hui-zhi-density-heatmaps">使用Plotly Express绘制Density Heatmaps</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_heatmap(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706205725585.png" alt></p>
<h3 id="she-zhi-density-heatmaps-zhong-bin-de-shu-liang">设置Density Heatmaps 中bin的数量</h3>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import plotly.express as px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_heatmap(df, <span class="attribute">x</span>=<span class="string">"total_bill"</span>, <span class="attribute">y</span>=<span class="string">"tip"</span>, <span class="attribute">nbinsx</span>=20, <span class="attribute">nbinsy</span>=20, <span class="attribute">color_continuous_scale</span>=<span class="string">"Viridis"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<h3 id="density-heatmaps-zuo-wei-zhu-tu-zhi-fang-tu-zuo-wei-fu-tu">Density Heatmaps作为主图，直方图作为附图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_heatmap(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, marginal_x=<span class="string">"histogram"</span>, marginal_y=<span class="string">"histogram"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210155309.png" alt></p>
<h3 id="density-heatmaps-rong-ru-duo-wei-shu-ju">Density Heatmaps 融入多维数据</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_heatmap(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, facet_row=<span class="string">"sex"</span>, facet_col=<span class="string">"smoker"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210317583.png" alt></p>
<h3 id="density-heatmaps-shi-yong-ju-he-han-shu">Density Heatmaps使用聚合函数</h3>
<p>通过传入z值和直方图，密度热图可以执行基本的聚合操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line"></span><br><span class="line">fig = px.density_heatmap(df, x=<span class="string">"petal_length"</span>, y=<span class="string">"petal_width"</span>, z=<span class="string">"sepal_length"</span>, histfunc=<span class="string">"avg"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706210845346.png" alt></p>
<h3 id="go-hui-zhi-er-yuan-zheng-tai-2-d-zhi-fang-tu">go:绘制二元正态2D直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">500</span>)</span><br><span class="line">y = np.random.randn(<span class="number">500</span>)+<span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram2d(</span><br><span class="line">        x=x,</span><br><span class="line">        y=y</span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211032831.png" alt></p>
<h3 id="go-she-zhi-yan-se-yang-shi">go:设置颜色样式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.random.randn(<span class="number">500</span>)</span><br><span class="line">y = np.random.randn(<span class="number">500</span>)+<span class="number">1</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram2d(x=x, y=y, histnorm=<span class="string">'probability'</span>,</span><br><span class="line">        autobinx=<span class="literal">False</span>,</span><br><span class="line">        xbins=dict(start=<span class="number">-3</span>, end=<span class="number">3</span>, size=<span class="number">0.1</span>),</span><br><span class="line">        autobiny=<span class="literal">False</span>,</span><br><span class="line">        ybins=dict(start=<span class="number">-2.5</span>, end=<span class="number">4</span>, size=<span class="number">0.1</span>),</span><br><span class="line">        colorscale=[[<span class="number">0</span>, <span class="string">'rgb(12,51,131)'</span>], [<span class="number">0.25</span>, <span class="string">'rgb(10,136,186)'</span>], [<span class="number">0.5</span>, <span class="string">'rgb(242,211,56)'</span>], [<span class="number">0.75</span>, <span class="string">'rgb(242,143,56)'</span>], [<span class="number">1</span>, <span class="string">'rgb(217,30,30)'</span>]]</span><br><span class="line">    ))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211216501.png" alt></p>
<h3 id="go-hui-zhi-duo-ge-zhi-fang-tu">go:绘制多个直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"></span><br><span class="line">fig = make_subplots(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Histogram2d(</span><br><span class="line">    x = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    y = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    coloraxis = <span class="string">"coloraxis"</span>,</span><br><span class="line">    xbins = &#123;<span class="string">'start'</span>:<span class="number">1</span>, <span class="string">'size'</span>:<span class="number">1</span>&#125;), <span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Histogram2d(</span><br><span class="line">    x = [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span> ],</span><br><span class="line">    y = [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span> ],</span><br><span class="line">    coloraxis = <span class="string">"coloraxis"</span>,</span><br><span class="line">    ybins = &#123;<span class="string">'start'</span>: <span class="number">3</span>, <span class="string">'size'</span>: <span class="number">1</span>&#125;),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Histogram2d(</span><br><span class="line">    x = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    y = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    bingroup = <span class="number">1</span>,</span><br><span class="line">    coloraxis = <span class="string">"coloraxis"</span>,</span><br><span class="line">    xbins = &#123;<span class="string">'start'</span>:<span class="number">1</span>, <span class="string">'size'</span>:<span class="number">1</span>&#125;), <span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Histogram2d(</span><br><span class="line">    x = [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span> ],</span><br><span class="line">    y = [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span> ],</span><br><span class="line">    bingroup = <span class="number">1</span>,</span><br><span class="line">    coloraxis = <span class="string">"coloraxis"</span>,</span><br><span class="line">    ybins = &#123;<span class="string">'start'</span>: <span class="number">3</span>, <span class="string">'size'</span>: <span class="number">1</span>&#125;),<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211431472.png" alt></p>
<h3 id="go-san-dian-tu-he-2-d-zhi-fang-tu">go:散点图和2D直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x0 = np.random.randn(<span class="number">100</span>)/<span class="number">5.</span> + <span class="number">0.5</span>  <span class="comment"># 5. enforces float division</span></span><br><span class="line">y0 = np.random.randn(<span class="number">100</span>)/<span class="number">5.</span> + <span class="number">0.5</span></span><br><span class="line">x1 = np.random.rand(<span class="number">50</span>)</span><br><span class="line">y1 = np.random.rand(<span class="number">50</span>) + <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">x = np.concatenate([x0, x1])</span><br><span class="line">y = np.concatenate([y0, y1])</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x0,</span><br><span class="line">    y=y0,</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        symbol=<span class="string">'x'</span>,</span><br><span class="line">        opacity=<span class="number">0.7</span>,</span><br><span class="line">        color=<span class="string">'white'</span>,</span><br><span class="line">        size=<span class="number">8</span>,</span><br><span class="line">        line=dict(width=<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x1,</span><br><span class="line">    y=y1,</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        symbol=<span class="string">'circle'</span>,</span><br><span class="line">        opacity=<span class="number">0.7</span>,</span><br><span class="line">        color=<span class="string">'white'</span>,</span><br><span class="line">        size=<span class="number">8</span>,</span><br><span class="line">        line=dict(width=<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Histogram2d(</span><br><span class="line">    x=x,</span><br><span class="line">    y=y,</span><br><span class="line">    colorscale=<span class="string">'YlGnBu'</span>,</span><br><span class="line">    zmax=<span class="number">10</span>,</span><br><span class="line">    nbinsx=<span class="number">14</span>,</span><br><span class="line">    nbinsy=<span class="number">14</span>,</span><br><span class="line">    zauto=<span class="literal">False</span>,</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    xaxis=dict( ticks=<span class="string">''</span>, showgrid=<span class="literal">False</span>, zeroline=<span class="literal">False</span>, nticks=<span class="number">20</span> ),</span><br><span class="line">    yaxis=dict( ticks=<span class="string">''</span>, showgrid=<span class="literal">False</span>, zeroline=<span class="literal">False</span>, nticks=<span class="number">20</span> ),</span><br><span class="line">    autosize=<span class="literal">False</span>,</span><br><span class="line">    height=<span class="number">550</span>,</span><br><span class="line">    width=<span class="number">550</span>,</span><br><span class="line">    hovermode=<span class="string">'closest'</span>,</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706211647050.png" alt></p>
<h2 id="san-dian-ju-zhen-scatterplot-matrix">散点矩阵：Scatterplot Matrix</h2>
<h3 id="shi-yong-plotly-express-hui-zhi-san-dian-tu-ju-zhen">使用Plotly Express绘制散点图矩阵</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line">fig = px.scatter_matrix(df)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212234294.png" alt></p>
<h3 id="zhi-ding-yan-se-lei-bie">指定颜色类别</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line">fig = px.scatter_matrix(df,</span><br><span class="line">    dimensions=[<span class="string">"sepal_width"</span>, <span class="string">"sepal_length"</span>, <span class="string">"petal_width"</span>, <span class="string">"petal_length"</span>],</span><br><span class="line">    color=<span class="string">"species"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212344611.png" alt></p>
<h3 id="diao-zheng-san-dian-tu-ju-zhen-de-yang-shi">调整散点图矩阵的样式</h3>
<p>可以使用px.scatter_matrix的参数来配置散点矩阵图，还可以使用fig.update_traces进行微调。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line">fig = px.scatter_matrix(df,</span><br><span class="line">    dimensions=[<span class="string">"sepal_width"</span>, <span class="string">"sepal_length"</span>, <span class="string">"petal_width"</span>, <span class="string">"petal_length"</span>],</span><br><span class="line">    color=<span class="string">"species"</span>, symbol=<span class="string">"species"</span>,</span><br><span class="line">    title=<span class="string">"Scatter matrix of iris data set"</span>,</span><br><span class="line">    labels=&#123;col:col.replace(<span class="string">'_'</span>, <span class="string">' '</span>) <span class="keyword">for</span> col <span class="keyword">in</span> df.columns&#125;) <span class="comment"># remove underscore</span></span><br><span class="line">fig.update_traces(diagonal_visible=<span class="literal">False</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212533201.png" alt="image-20200706212533201"></p>
<h3 id="go-splom">go.Splom</h3>
<p><a href="https://plotly.com/python/reference/#splom" target="_blank" rel="noopener">more about splom</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/iris-data.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The Iris dataset contains four data variables, sepal length, sepal width, petal length,</span></span><br><span class="line"><span class="comment"># petal width, for 150 iris flowers. The flowers are labeled as `Iris-setosa`,</span></span><br><span class="line"><span class="comment"># `Iris-versicolor`, `Iris-virginica`.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define indices corresponding to flower categories, using pandas label encoding</span></span><br><span class="line">index_vals = df[<span class="string">'class'</span>].astype(<span class="string">'category'</span>).cat.codes</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Splom(</span><br><span class="line">                dimensions=[dict(label=<span class="string">'sepal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'sepal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal width'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal width'</span>])],</span><br><span class="line">                text=df[<span class="string">'class'</span>],</span><br><span class="line">                marker=dict(color=index_vals,</span><br><span class="line">                            showscale=<span class="literal">False</span>, <span class="comment"># colors encode categorical variables</span></span><br><span class="line">                            line_color=<span class="string">'white'</span>, line_width=<span class="number">0.5</span>)</span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Iris Data set'</span>,</span><br><span class="line">    dragmode=<span class="string">'select'</span>,</span><br><span class="line">    width=<span class="number">600</span>,</span><br><span class="line">    height=<span class="number">600</span>,</span><br><span class="line">    hovermode=<span class="string">'closest'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212809447.png" alt></p>
<h3 id="go-shan-chu-dui-jiao-xian-shang-de-tu">go:删除对角线上的图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/iris-data.csv'</span>)</span><br><span class="line">index_vals = df[<span class="string">'class'</span>].astype(<span class="string">'category'</span>).cat.codes</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Splom(</span><br><span class="line">                dimensions=[dict(label=<span class="string">'sepal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'sepal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal width'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal width'</span>])],</span><br><span class="line">                diagonal_visible=<span class="literal">False</span>, <span class="comment"># remove plots on diagonal</span></span><br><span class="line">                text=df[<span class="string">'class'</span>],</span><br><span class="line">                marker=dict(color=index_vals,</span><br><span class="line">                            showscale=<span class="literal">False</span>, <span class="comment"># colors encode categorical variables</span></span><br><span class="line">                            line_color=<span class="string">'white'</span>, line_width=<span class="number">0.5</span>)</span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Iris Data set'</span>,</span><br><span class="line">    width=<span class="number">600</span>,</span><br><span class="line">    height=<span class="number">600</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706212937537.png" alt></p>
<h3 id="go-zhi-hui-zhi-xia-dui-jiao-xian">go: 只绘制下对角线</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/iris-data.csv'</span>)</span><br><span class="line">index_vals = df[<span class="string">'class'</span>].astype(<span class="string">'category'</span>).cat.codes</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Splom(</span><br><span class="line">                dimensions=[dict(label=<span class="string">'sepal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'sepal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal width'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal width'</span>])],</span><br><span class="line">                showupperhalf=<span class="literal">False</span>, <span class="comment"># remove plots on diagonal</span></span><br><span class="line">                text=df[<span class="string">'class'</span>],</span><br><span class="line">                marker=dict(color=index_vals,</span><br><span class="line">                            showscale=<span class="literal">False</span>, <span class="comment"># colors encode categorical variables</span></span><br><span class="line">                            line_color=<span class="string">'white'</span>, line_width=<span class="number">0.5</span>)</span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Iris Data set'</span>,</span><br><span class="line">    width=<span class="number">600</span>,</span><br><span class="line">    height=<span class="number">600</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213034213.png" alt></p>
<h3 id="go-zhi-hui-zhi-bu-fen-tu">go: 只绘制部分图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/iris-data.csv'</span>)</span><br><span class="line">index_vals = df[<span class="string">'class'</span>].astype(<span class="string">'category'</span>).cat.codes</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Splom(</span><br><span class="line">                dimensions=[dict(label=<span class="string">'sepal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'sepal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'sepal width'</span>],</span><br><span class="line">                                 visible=<span class="literal">False</span>),</span><br><span class="line">                            dict(label=<span class="string">'petal length'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal length'</span>]),</span><br><span class="line">                            dict(label=<span class="string">'petal width'</span>,</span><br><span class="line">                                 values=df[<span class="string">'petal width'</span>])],</span><br><span class="line">                text=df[<span class="string">'class'</span>],</span><br><span class="line">                marker=dict(color=index_vals,</span><br><span class="line">                            showscale=<span class="literal">False</span>, <span class="comment"># colors encode categorical variables</span></span><br><span class="line">                            line_color=<span class="string">'white'</span>, line_width=<span class="number">0.5</span>)</span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Iris Data set'</span>,</span><br><span class="line">    width=<span class="number">600</span>,</span><br><span class="line">    height=<span class="number">600</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213152973.png" alt></p>
<h3 id="go-kaggle-an-li">go:kaggle 案例</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">dfd = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/diabetes.csv'</span>)</span><br><span class="line">textd = [<span class="string">'non-diabetic'</span> <span class="keyword">if</span> cl==<span class="number">0</span> <span class="keyword">else</span> <span class="string">'diabetic'</span> <span class="keyword">for</span> cl <span class="keyword">in</span> dfd[<span class="string">'Outcome'</span>]]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Splom(</span><br><span class="line">                  dimensions=[dict(label=<span class="string">'Pregnancies'</span>, values=dfd[<span class="string">'Pregnancies'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'Glucose'</span>, values=dfd[<span class="string">'Glucose'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'BloodPressure'</span>, values=dfd[<span class="string">'BloodPressure'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'SkinThickness'</span>, values=dfd[<span class="string">'SkinThickness'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'Insulin'</span>, values=dfd[<span class="string">'Insulin'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'BMI'</span>, values=dfd[<span class="string">'BMI'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'DiabPedigreeFun'</span>, values=dfd[<span class="string">'DiabetesPedigreeFunction'</span>]),</span><br><span class="line">                              dict(label=<span class="string">'Age'</span>, values=dfd[<span class="string">'Age'</span>])],</span><br><span class="line">                  marker=dict(color=dfd[<span class="string">'Outcome'</span>],</span><br><span class="line">                              size=<span class="number">5</span>,</span><br><span class="line">                              colorscale=<span class="string">'Bluered'</span>,</span><br><span class="line">                              line=dict(width=<span class="number">0.5</span>,</span><br><span class="line">                                        color=<span class="string">'rgb(230,230,230)'</span>)),</span><br><span class="line">                  text=textd,</span><br><span class="line">                  diagonal=dict(visible=<span class="literal">False</span>)))</span><br><span class="line"></span><br><span class="line">title = <span class="string">"Scatterplot Matrix (SPLOM) for Diabetes Dataset&lt;br&gt;Data source:"</span>+\</span><br><span class="line">        <span class="string">" &lt;a href='https://www.kaggle.com/uciml/pima-indians-diabetes-database/data'&gt;[1]&lt;/a&gt;"</span></span><br><span class="line">fig.update_layout(title=title,</span><br><span class="line">                  dragmode=<span class="string">'select'</span>,</span><br><span class="line">                  width=<span class="number">1000</span>,</span><br><span class="line">                  height=<span class="number">1000</span>,</span><br><span class="line">                  hovermode=<span class="string">'closest'</span>)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706213417004.png" alt></p>
<h2 id="fen-mian-ge-zi-tu-facet-and-trellis">分面格子图：Facet and Trellis</h2>
<h3 id="col-facet-san-dian-tu">col facet：散点图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">"smoker"</span>, facet_col=<span class="string">"sex"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214325733.png" alt></p>
<h3 id="row-facet-tiao-xing-tu">row facet：条形图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.bar(df, x=<span class="string">"size"</span>, y=<span class="string">"total_bill"</span>, color=<span class="string">"sex"</span>, facet_row=<span class="string">"smoker"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214534103.png" alt></p>
<h3 id="wrapping-column-facets">Wrapping Column Facets</h3>
<p>当facet的维度有很多个取值的时候，可以使用facet_col_wrap参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.gapminder()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">'gdpPercap'</span>, y=<span class="string">'lifeExp'</span>, color=<span class="string">'continent'</span>, size=<span class="string">'pop'</span>,</span><br><span class="line">                facet_col=<span class="string">'year'</span>, facet_col_wrap=<span class="number">4</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214809394.png" alt></p>
<h3 id="facet-zhi-fang-tu">facet:直方图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.histogram(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">"sex"</span>, facet_row=<span class="string">"time"</span>, facet_col=<span class="string">"day"</span>,</span><br><span class="line">       category_orders=&#123;<span class="string">"day"</span>: [<span class="string">"Thur"</span>, <span class="string">"Fri"</span>, <span class="string">"Sat"</span>, <span class="string">"Sun"</span>], <span class="string">"time"</span>: [<span class="string">"Lunch"</span>, <span class="string">"Dinner"</span>]&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706214908170.png" alt></p>
<h3 id="du-li-de-axes">独立的axes</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">'sex'</span>, facet_row=<span class="string">"day"</span>)</span><br><span class="line">fig.update_yaxes(matches=<span class="literal">None</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215153939.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, color=<span class="string">'sex'</span>, facet_col=<span class="string">"day"</span>)</span><br><span class="line">fig.update_xaxes(matches=<span class="literal">None</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215300199.png" alt></p>
<h3 id="ding-zhi-subplot-de-tu-biao-ti">定制subplot的图标题</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">fig = px.scatter(px.data.tips(), x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, facet_col=<span class="string">"smoker"</span>)</span><br><span class="line">fig.for_each_annotation(<span class="keyword">lambda</span> a: a.update(text=a.text.split(<span class="string">"="</span>)[<span class="number">-1</span>]))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215454880.png" alt></p>
<h3 id="shi-yong-match-lai-tong-bu-zhou">使用match来同步轴</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">N = <span class="number">20</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, N)</span><br><span class="line"></span><br><span class="line">fig = make_subplots(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">    fig.add_trace(go.Scatter(x=x, y=np.random.random(N)), <span class="number">1</span>, i)</span><br><span class="line">fig.update_xaxes(matches=<span class="string">'x'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200706215718601.png" alt></p>
<h2 id="ping-xing-lei-bie-shi-yi-tu-parallel-categories-diagram">平行类别示意图：Parallel Categories Diagram</h2>
<p>该图能够展示离散变量之间的交互关系。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.parallel_categories(df)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709223852876.png" alt></p>
<h3 id="yan-se-yang-shi">颜色样式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.parallel_categories(df, dimensions=[<span class="string">'sex'</span>, <span class="string">'smoker'</span>, <span class="string">'day'</span>],</span><br><span class="line">                color=<span class="string">"size"</span>, color_continuous_scale=px.colors.sequential.Inferno,</span><br><span class="line">                labels=&#123;<span class="string">'sex'</span>:<span class="string">'Payer sex'</span>, <span class="string">'smoker'</span>:<span class="string">'Smokers at the table'</span>, <span class="string">'day'</span>:<span class="string">'Day of week'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224118321.png" alt></p>
<h3 id="shi-yong-graph-objects-lai-hui-zhi-ping-xing-lei-bie-tu">使用graph_objects来绘制平行类别图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Parcats(</span><br><span class="line">    dimensions=[</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Hair'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Black'</span>, <span class="string">'Black'</span>, <span class="string">'Black'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Red'</span>, <span class="string">'Brown'</span>]&#125;,</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Eye'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Blue'</span>, <span class="string">'Blue'</span>, <span class="string">'Blue'</span>]&#125;,</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Sex'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Female'</span>, <span class="string">'Female'</span>, <span class="string">'Female'</span>, <span class="string">'Male'</span>, <span class="string">'Female'</span>, <span class="string">'Male'</span>, <span class="string">'Male'</span>, <span class="string">'Male'</span>]&#125;]</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224308377.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Parcats(</span><br><span class="line">    dimensions=[</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Hair'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Black'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Red'</span>]&#125;,</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Eye'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Brown'</span>, <span class="string">'Blue'</span>, <span class="string">'Blue'</span>]&#125;,</span><br><span class="line">        &#123;<span class="string">'label'</span>: <span class="string">'Sex'</span>,</span><br><span class="line">         <span class="string">'values'</span>: [<span class="string">'Female'</span>, <span class="string">'Male'</span>, <span class="string">'Female'</span>, <span class="string">'Male'</span>, <span class="string">'Male'</span>]&#125;],</span><br><span class="line">    counts=[<span class="number">6</span>, <span class="number">10</span>, <span class="number">40</span>, <span class="number">23</span>, <span class="number">7</span>]</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709224600260.png" alt></p>
<h3 id="go-she-zhi-duo-ge-yan-se-yang-shi">go：设置多个颜色样式</h3>
<p>丝带的颜色可以通过line.color来设置，line.color可以被复制为一个数组，通过colorscale来指定颜色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">titanic_df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/titanic.csv"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create dimensions</span></span><br><span class="line">class_dim = go.parcats.Dimension(</span><br><span class="line">    values=titanic_df.Pclass,</span><br><span class="line">    categoryorder=<span class="string">'category ascending'</span>, label=<span class="string">"Class"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">gender_dim = go.parcats.Dimension(values=titanic_df.Sex, label=<span class="string">"Gender"</span>)</span><br><span class="line"></span><br><span class="line">survival_dim = go.parcats.Dimension(</span><br><span class="line">    values=titanic_df.Survived, label=<span class="string">"Outcome"</span>, categoryarray=[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">    ticktext=[<span class="string">'perished'</span>, <span class="string">'survived'</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create parcats trace</span></span><br><span class="line">color = titanic_df.Survived <span class="comment"># color 对应是否存活</span></span><br><span class="line">colorscale = [[<span class="number">0</span>, <span class="string">'lightsteelblue'</span>], [<span class="number">1</span>, <span class="string">'mediumseagreen'</span>]] <span class="comment"># 通过colorscale 指定丝带颜色</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data = [go.Parcats(dimensions=[class_dim, gender_dim, survival_dim],</span><br><span class="line">        line=&#123;<span class="string">'color'</span>: color, <span class="string">'colorscale'</span>: colorscale&#125;, </span><br><span class="line">        hoveron=<span class="string">'color'</span>, hoverinfo=<span class="string">'count+probability'</span>,<span class="comment"># hoverinfo:显示count统计和概率值</span></span><br><span class="line">        labelfont=&#123;<span class="string">'size'</span>: <span class="number">18</span>, <span class="string">'family'</span>: <span class="string">'Times'</span>&#125;,</span><br><span class="line">        tickfont=&#123;<span class="string">'size'</span>: <span class="number">16</span>, <span class="string">'family'</span>: <span class="string">'Times'</span>&#125;,</span><br><span class="line">        arrangement=<span class="string">'freeform'</span>)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709225135256.png" alt></p>
<h3 id="go-xuan-ze-san-dian-hui-zhi-si-dai-yan-se">go:选择散点，绘制丝带颜色</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> ipywidgets <span class="keyword">import</span> widgets</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">cars_df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/imports-85.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build parcats dimensions</span></span><br><span class="line">categorical_dimensions = [<span class="string">'body-style'</span>, <span class="string">'drive-wheels'</span>, <span class="string">'fuel-type'</span>];</span><br><span class="line"></span><br><span class="line">dimensions = [dict(values=cars_df[label], label=label) <span class="keyword">for</span> label <span class="keyword">in</span> categorical_dimensions]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build colorscale</span></span><br><span class="line">color = np.zeros(len(cars_df), dtype=<span class="string">'uint8'</span>)</span><br><span class="line">colorscale = [[<span class="number">0</span>, <span class="string">'gray'</span>], [<span class="number">1</span>, <span class="string">'firebrick'</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build figure as FigureWidget</span></span><br><span class="line">fig = go.FigureWidget(</span><br><span class="line">    data=[go.Scatter(x=cars_df.horsepower, y=cars_df[<span class="string">'highway-mpg'</span>],</span><br><span class="line">    marker=&#123;<span class="string">'color'</span>: <span class="string">'gray'</span>&#125;, mode=<span class="string">'markers'</span>, selected=&#123;<span class="string">'marker'</span>: &#123;<span class="string">'color'</span>: <span class="string">'firebrick'</span>&#125;&#125;,</span><br><span class="line">    unselected=&#123;<span class="string">'marker'</span>: &#123;<span class="string">'opacity'</span>: <span class="number">0.3</span>&#125;&#125;), go.Parcats(</span><br><span class="line">        domain=&#123;<span class="string">'y'</span>: [<span class="number">0</span>, <span class="number">0.4</span>]&#125;, dimensions=dimensions,</span><br><span class="line">        line=&#123;<span class="string">'colorscale'</span>: colorscale, <span class="string">'cmin'</span>: <span class="number">0</span>,</span><br><span class="line">              <span class="string">'cmax'</span>: <span class="number">1</span>, <span class="string">'color'</span>: color, <span class="string">'shape'</span>: <span class="string">'hspline'</span>&#125;)</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">        height=<span class="number">800</span>, xaxis=&#123;<span class="string">'title'</span>: <span class="string">'Horsepower'</span>&#125;,</span><br><span class="line">        yaxis=&#123;<span class="string">'title'</span>: <span class="string">'MPG'</span>, <span class="string">'domain'</span>: [<span class="number">0.6</span>, <span class="number">1</span>]&#125;,</span><br><span class="line">        dragmode=<span class="string">'lasso'</span>, hovermode=<span class="string">'closest'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update color callback</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_color</span><span class="params">(trace, points, state)</span>:</span></span><br><span class="line">    <span class="comment"># Update scatter selection</span></span><br><span class="line">    fig.data[<span class="number">0</span>].selectedpoints = points.point_inds</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Update parcats colors</span></span><br><span class="line">    new_color = np.zeros(len(cars_df), dtype=<span class="string">'uint8'</span>)</span><br><span class="line">    new_color[points.point_inds] = <span class="number">1</span></span><br><span class="line">    fig.data[<span class="number">1</span>].line.color = new_color</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register callback on scatter selection...</span></span><br><span class="line">fig.data[<span class="number">0</span>].on_selection(update_color)</span><br><span class="line"><span class="comment"># and parcats click</span></span><br><span class="line">fig.data[<span class="number">1</span>].on_click(update_color)</span><br><span class="line"></span><br><span class="line">fig</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709225334650.png" alt></p>
<h3 id="go-gei-yu-bu-tong-de-san-dian-bu-tong-de-yan-se">go:给与不同的散点不同的颜色</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> ipywidgets <span class="keyword">as</span> widgets</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">cars_df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/imports-85.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build parcats dimensions</span></span><br><span class="line">categorical_dimensions = [<span class="string">'body-style'</span>, <span class="string">'drive-wheels'</span>, <span class="string">'fuel-type'</span>]</span><br><span class="line"></span><br><span class="line">dimensions = [dict(values=cars_df[label], label=label) <span class="keyword">for</span> label <span class="keyword">in</span> categorical_dimensions]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build colorscale</span></span><br><span class="line">color = np.zeros(len(cars_df), dtype=<span class="string">'uint8'</span>)</span><br><span class="line">colorscale = [[<span class="number">0</span>, <span class="string">'gray'</span>], [<span class="number">0.33</span>, <span class="string">'gray'</span>],</span><br><span class="line">              [<span class="number">0.33</span>, <span class="string">'firebrick'</span>], [<span class="number">0.66</span>, <span class="string">'firebrick'</span>],</span><br><span class="line">              [<span class="number">0.66</span>, <span class="string">'blue'</span>], [<span class="number">1.0</span>, <span class="string">'blue'</span>]]</span><br><span class="line">cmin = <span class="number">-0.5</span></span><br><span class="line">cmax = <span class="number">2.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build figure as FigureWidget</span></span><br><span class="line">fig = go.FigureWidget(</span><br><span class="line">    data=[go.Scatter(x=cars_df.horsepower, y=cars_df[<span class="string">'highway-mpg'</span>],</span><br><span class="line">                marker=&#123;<span class="string">'color'</span>: color, <span class="string">'cmin'</span>: cmin, <span class="string">'cmax'</span>: cmax,</span><br><span class="line">                        <span class="string">'colorscale'</span>: colorscale, <span class="string">'showscale'</span>: <span class="literal">True</span>,</span><br><span class="line">                        <span class="string">'colorbar'</span>: &#123;<span class="string">'tickvals'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], <span class="string">'ticktext'</span>: [<span class="string">'None'</span>, <span class="string">'Red'</span>, <span class="string">'Blue'</span>]&#125;&#125;,</span><br><span class="line">                     mode=<span class="string">'markers'</span>),</span><br><span class="line"></span><br><span class="line">      go.Parcats(domain=&#123;<span class="string">'y'</span>: [<span class="number">0</span>, <span class="number">0.4</span>]&#125;, dimensions=dimensions,</span><br><span class="line">                   line=&#123;<span class="string">'colorscale'</span>: colorscale, <span class="string">'cmin'</span>: cmin,</span><br><span class="line">                   <span class="string">'cmax'</span>: cmax, <span class="string">'color'</span>: color, <span class="string">'shape'</span>: <span class="string">'hspline'</span>&#125;)]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.update_layout(height=<span class="number">800</span>, xaxis=&#123;<span class="string">'title'</span>: <span class="string">'Horsepower'</span>&#125;,</span><br><span class="line">                  yaxis=&#123;<span class="string">'title'</span>: <span class="string">'MPG'</span>, <span class="string">'domain'</span>: [<span class="number">0.6</span>, <span class="number">1</span>]&#125;,</span><br><span class="line">                  dragmode=<span class="string">'lasso'</span>, hovermode=<span class="string">'closest'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build color selection widget</span></span><br><span class="line">color_toggle = widgets.ToggleButtons(</span><br><span class="line">    options=[<span class="string">'None'</span>, <span class="string">'Red'</span>, <span class="string">'Blue'</span>],</span><br><span class="line">    index=<span class="number">1</span>, description=<span class="string">'Brush Color:'</span>, disabled=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update color callback</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_color</span><span class="params">(trace, points, state)</span>:</span></span><br><span class="line">    <span class="comment"># Compute new color array</span></span><br><span class="line">    new_color = np.array(fig.data[<span class="number">0</span>].marker.color)</span><br><span class="line">    new_color[points.point_inds] = color_toggle.index</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> fig.batch_update():</span><br><span class="line">        <span class="comment"># Update scatter color</span></span><br><span class="line">        fig.data[<span class="number">0</span>].marker.color = new_color</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Update parcats colors</span></span><br><span class="line">        fig.data[<span class="number">1</span>].line.color = new_color</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register callback on scatter selection...</span></span><br><span class="line">fig.data[<span class="number">0</span>].on_selection(update_color)</span><br><span class="line"><span class="comment"># and parcats click</span></span><br><span class="line">fig.data[<span class="number">1</span>].on_click(update_color)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Display figure</span></span><br><span class="line">widgets.VBox([color_toggle, fig])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231144923.png" alt></p>
<h2 id="shu-tree">树：Tree</h2>
<h3 id="an-zhuang-igraph">安装 igraph</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!pip install python-igraph</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成数据</span></span><br><span class="line"><span class="keyword">import</span> igraph</span><br><span class="line"><span class="keyword">from</span> igraph <span class="keyword">import</span> Graph, EdgeSeq</span><br><span class="line">nr_vertices = <span class="number">25</span></span><br><span class="line">v_label = list(map(str, range(nr_vertices)))</span><br><span class="line">G = Graph.Tree(nr_vertices, <span class="number">2</span>) <span class="comment"># 2 stands for children number</span></span><br><span class="line">lay = G.layout(<span class="string">'rt'</span>)</span><br><span class="line"></span><br><span class="line">position = &#123;k: lay[k] <span class="keyword">for</span> k <span class="keyword">in</span> range(nr_vertices)&#125;</span><br><span class="line">Y = [lay[k][<span class="number">1</span>] <span class="keyword">for</span> k <span class="keyword">in</span> range(nr_vertices)]</span><br><span class="line">M = max(Y)</span><br><span class="line"></span><br><span class="line">es = EdgeSeq(G) <span class="comment"># sequence of edges</span></span><br><span class="line">E = [e.tuple <span class="keyword">for</span> e <span class="keyword">in</span> G.es] <span class="comment"># list of edges</span></span><br><span class="line"></span><br><span class="line">L = len(position)</span><br><span class="line">Xn = [position[k][<span class="number">0</span>] <span class="keyword">for</span> k <span class="keyword">in</span> range(L)]</span><br><span class="line">Yn = [<span class="number">2</span>*M-position[k][<span class="number">1</span>] <span class="keyword">for</span> k <span class="keyword">in</span> range(L)]</span><br><span class="line">Xe = []</span><br><span class="line">Ye = []</span><br><span class="line"><span class="keyword">for</span> edge <span class="keyword">in</span> E:</span><br><span class="line">    Xe+=[position[edge[<span class="number">0</span>]][<span class="number">0</span>],position[edge[<span class="number">1</span>]][<span class="number">0</span>], <span class="literal">None</span>]</span><br><span class="line">    Ye+=[<span class="number">2</span>*M-position[edge[<span class="number">0</span>]][<span class="number">1</span>],<span class="number">2</span>*M-position[edge[<span class="number">1</span>]][<span class="number">1</span>], <span class="literal">None</span>]</span><br><span class="line"></span><br><span class="line">labels = v_label</span><br></pre></td></tr></table></figure>
<h3 id="go-hui-zhi-shu">go:绘制树</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Scatter(x=Xe,</span><br><span class="line">                   y=Ye,</span><br><span class="line">                   mode=<span class="string">'lines'</span>,</span><br><span class="line">                   line=dict(color=<span class="string">'rgb(210,210,210)'</span>, width=<span class="number">1</span>),</span><br><span class="line">                   hoverinfo=<span class="string">'none'</span></span><br><span class="line">                   ))</span><br><span class="line">fig.add_trace(go.Scatter(x=Xn,</span><br><span class="line">                  y=Yn,</span><br><span class="line">                  mode=<span class="string">'markers'</span>,</span><br><span class="line">                  name=<span class="string">'bla'</span>,</span><br><span class="line">                  marker=dict(symbol=<span class="string">'circle-dot'</span>,</span><br><span class="line">                                size=<span class="number">18</span>,</span><br><span class="line">                                color=<span class="string">'#6175c1'</span>,    <span class="comment">#'#DB4551',</span></span><br><span class="line">                                line=dict(color=<span class="string">'rgb(50,50,50)'</span>, width=<span class="number">1</span>)</span><br><span class="line">                                ),</span><br><span class="line">                  text=labels,</span><br><span class="line">                  hoverinfo=<span class="string">'text'</span>,</span><br><span class="line">                  opacity=<span class="number">0.8</span></span><br><span class="line">                  ))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231744911.png" alt></p>
<h3 id="go-tian-jia-wen-ben">go :添加文本</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_annotations</span><span class="params">(pos, text, font_size=<span class="number">10</span>, font_color=<span class="string">'rgb(250,250,250)'</span>)</span>:</span></span><br><span class="line">    L=len(pos)</span><br><span class="line">    <span class="keyword">if</span> len(text)!=L:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'The lists pos and text must have the same len'</span>)</span><br><span class="line">    annotations = []</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(L):</span><br><span class="line">        annotations.append(</span><br><span class="line">            dict(</span><br><span class="line">                text=labels[k], <span class="comment"># or replace labels with a different list for the text within the circle</span></span><br><span class="line">                x=pos[k][<span class="number">0</span>], y=<span class="number">2</span>*M-position[k][<span class="number">1</span>],</span><br><span class="line">                xref=<span class="string">'x1'</span>, yref=<span class="string">'y1'</span>,</span><br><span class="line">                font=dict(color=font_color, size=font_size),</span><br><span class="line">                showarrow=<span class="literal">False</span>)</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">return</span> annotations</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">axis = dict(showline=<span class="literal">False</span>, <span class="comment"># hide axis line, grid, ticklabels and  title</span></span><br><span class="line">            zeroline=<span class="literal">False</span>,</span><br><span class="line">            showgrid=<span class="literal">False</span>,</span><br><span class="line">            showticklabels=<span class="literal">False</span>,</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">fig.update_layout(title= <span class="string">'Tree with Reingold-Tilford Layout'</span>,</span><br><span class="line">              annotations=make_annotations(position, v_label),</span><br><span class="line">              font_size=<span class="number">12</span>,</span><br><span class="line">              showlegend=<span class="literal">False</span>,</span><br><span class="line">              xaxis=axis,</span><br><span class="line">              yaxis=axis,</span><br><span class="line">              margin=dict(l=<span class="number">40</span>, r=<span class="number">40</span>, b=<span class="number">85</span>, t=<span class="number">100</span>),</span><br><span class="line">              hovermode=<span class="string">'closest'</span>,</span><br><span class="line">              plot_bgcolor=<span class="string">'rgb(248,248,248)'</span></span><br><span class="line">              )</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200709231927096.png" alt></p>
<h2 id="xiao-ti-qin-tu-violin">小提琴图：Violin</h2>
<h3 id="shi-yong-plotly-express-hui-zhi-xiao-ti-qin-tu">使用Plotly Express绘制小提琴图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.violin(df, y=<span class="string">"total_bill"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065415158.png" alt></p>
<h3 id="tong-shi-hui-zhi-he-tu-san-dian-tu-fen-bu">同时绘制盒图散点图分布</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.violin(df, y=<span class="string">"total_bill"</span>, box=<span class="literal">True</span>, <span class="comment"># draw box plot inside the violin</span></span><br><span class="line">                points=<span class="string">'all'</span>, <span class="comment"># can be 'outliers', or False</span></span><br><span class="line">               )</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065504809.png" alt></p>
<h3 id="hui-zhi-duo-ge-xiao-ti-qin-tu">绘制多个小提琴图</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.violin(df, y=<span class="string">"tip"</span>, x=<span class="string">"smoker"</span>, color=<span class="string">"sex"</span>, box=<span class="literal">True</span>, points=<span class="string">"all"</span>,</span><br><span class="line">          hover_data=df.columns)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065636430.png" alt></p>
<h3 id="yi-overlap-de-fang-shi-hui-zhi">以overlap的方式绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.violin(df, y=<span class="string">"tip"</span>, color=<span class="string">"sex"</span>,</span><br><span class="line">                violinmode=<span class="string">'overlay'</span>, <span class="comment"># draw violins on top of each other</span></span><br><span class="line">                <span class="comment"># default violinmode is 'group' as in example above</span></span><br><span class="line">                hover_data=df.columns)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710065722299.png" alt></p>
<h3 id="shi-yong-graph-object-hui-zhi">使用graph_object绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/violin_data.csv"</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Violin(y=df[<span class="string">'total_bill'</span>], box_visible=<span class="literal">True</span>, line_color=<span class="string">'black'</span>,</span><br><span class="line">                               meanline_visible=<span class="literal">True</span>, fillcolor=<span class="string">'lightseagreen'</span>, opacity=<span class="number">0.6</span>,</span><br><span class="line">                               x0=<span class="string">'Total Bill'</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(yaxis_zeroline=<span class="literal">False</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070017563.png" alt></p>
<h3 id="go-duo-ge-trace">go:多个trace</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/violin_data.csv"</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">days = [<span class="string">'Thur'</span>, <span class="string">'Fri'</span>, <span class="string">'Sat'</span>, <span class="string">'Sun'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> day <span class="keyword">in</span> days:</span><br><span class="line">    fig.add_trace(go.Violin(x=df[<span class="string">'day'</span>][df[<span class="string">'day'</span>] == day],</span><br><span class="line">                            y=df[<span class="string">'total_bill'</span>][df[<span class="string">'day'</span>] == day],</span><br><span class="line">                            name=day,</span><br><span class="line">                            box_visible=<span class="literal">True</span>,</span><br><span class="line">                            meanline_visible=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070133330.png" alt></p>
<h3 id="go-fen-zu-hui-zhi-xiao-ti-qin-tu">go:分组绘制小提琴图</h3>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import plotly.graph_objects as go</span><br><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/violin_data.csv"</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Violin(<span class="attribute">x</span>=df[<span class="string">'day'</span>][ df[<span class="string">'sex'</span>] == <span class="string">'Male'</span> ],</span><br><span class="line">                        <span class="attribute">y</span>=df[<span class="string">'total_bill'</span>][ df[<span class="string">'sex'</span>] == <span class="string">'Male'</span> ],</span><br><span class="line">                        <span class="attribute">legendgroup</span>=<span class="string">'M'</span>, <span class="attribute">scalegroup</span>=<span class="string">'M'</span>, <span class="attribute">name</span>=<span class="string">'M'</span>,</span><br><span class="line">                        <span class="attribute">line_color</span>=<span class="string">'blue'</span>)</span><br><span class="line">             )</span><br><span class="line">fig.add_trace(go.Violin(<span class="attribute">x</span>=df[<span class="string">'day'</span>][ df[<span class="string">'sex'</span>] == <span class="string">'Female'</span> ],</span><br><span class="line">                        <span class="attribute">y</span>=df[<span class="string">'total_bill'</span>][ df[<span class="string">'sex'</span>] == <span class="string">'Female'</span> ],</span><br><span class="line">                        <span class="attribute">legendgroup</span>=<span class="string">'F'</span>, <span class="attribute">scalegroup</span>=<span class="string">'F'</span>, <span class="attribute">name</span>=<span class="string">'F'</span>,</span><br><span class="line">                        <span class="attribute">line_color</span>=<span class="string">'orange'</span>)</span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line">fig.update_traces(<span class="attribute">box_visible</span>=<span class="literal">True</span>, <span class="attribute">meanline_visible</span>=<span class="literal">True</span>)</span><br><span class="line">fig.update_layout(<span class="attribute">violinmode</span>=<span class="string">'group'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070239758.png" alt></p>
<h3 id="go-fen-ge-xiao-ti-qin-tu">go:分割小提琴图</h3>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import plotly.graph_objects as go</span><br><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/violin_data.csv"</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Violin(<span class="attribute">x</span>=df[<span class="string">'day'</span>][ df[<span class="string">'smoker'</span>] == <span class="string">'Yes'</span> ],</span><br><span class="line">                        <span class="attribute">y</span>=df[<span class="string">'total_bill'</span>][ df[<span class="string">'smoker'</span>] == <span class="string">'Yes'</span> ],</span><br><span class="line">                        <span class="attribute">legendgroup</span>=<span class="string">'Yes'</span>, <span class="attribute">scalegroup</span>=<span class="string">'Yes'</span>, <span class="attribute">name</span>=<span class="string">'Yes'</span>,</span><br><span class="line">                        <span class="attribute">side</span>=<span class="string">'negative'</span>,</span><br><span class="line">                        <span class="attribute">line_color</span>=<span class="string">'blue'</span>)</span><br><span class="line">             )</span><br><span class="line">fig.add_trace(go.Violin(<span class="attribute">x</span>=df[<span class="string">'day'</span>][ df[<span class="string">'smoker'</span>] == <span class="string">'No'</span> ],</span><br><span class="line">                        <span class="attribute">y</span>=df[<span class="string">'total_bill'</span>][ df[<span class="string">'smoker'</span>] == <span class="string">'No'</span> ],</span><br><span class="line">                        <span class="attribute">legendgroup</span>=<span class="string">'No'</span>, <span class="attribute">scalegroup</span>=<span class="string">'No'</span>, <span class="attribute">name</span>=<span class="string">'No'</span>,</span><br><span class="line">                        <span class="attribute">side</span>=<span class="string">'positive'</span>,</span><br><span class="line">                        <span class="attribute">line_color</span>=<span class="string">'orange'</span>)</span><br><span class="line">             )</span><br><span class="line">fig.update_traces(<span class="attribute">meanline_visible</span>=<span class="literal">True</span>)</span><br><span class="line">fig.update_layout(<span class="attribute">violingap</span>=0, <span class="attribute">violinmode</span>=<span class="string">'overlay'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070352035.png" alt></p>
<h3 id="go-gao-ji-hui-zhi">go:高级绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">"https://raw.githubusercontent.com/plotly/datasets/master/violin_data.csv"</span>)</span><br><span class="line"></span><br><span class="line">pointpos_male = [<span class="number">-0.9</span>,<span class="number">-1.1</span>,<span class="number">-0.6</span>,<span class="number">-0.3</span>]</span><br><span class="line">pointpos_female = [<span class="number">0.45</span>,<span class="number">0.55</span>,<span class="number">1</span>,<span class="number">0.4</span>]</span><br><span class="line">show_legend = [<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">False</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(pd.unique(df[<span class="string">'day'</span>]))):</span><br><span class="line">    fig.add_trace(go.Violin(x=df[<span class="string">'day'</span>][(df[<span class="string">'sex'</span>] == <span class="string">'Male'</span>) &amp;</span><br><span class="line">                                        (df[<span class="string">'day'</span>] == pd.unique(df[<span class="string">'day'</span>])[i])],</span><br><span class="line">                            y=df[<span class="string">'total_bill'</span>][(df[<span class="string">'sex'</span>] == <span class="string">'Male'</span>)&amp;</span><br><span class="line">                                               (df[<span class="string">'day'</span>] == pd.unique(df[<span class="string">'day'</span>])[i])],</span><br><span class="line">                            legendgroup=<span class="string">'M'</span>, scalegroup=<span class="string">'M'</span>, name=<span class="string">'M'</span>,</span><br><span class="line">                            side=<span class="string">'negative'</span>,</span><br><span class="line">                            pointpos=pointpos_male[i], <span class="comment"># where to position points</span></span><br><span class="line">                            line_color=<span class="string">'lightseagreen'</span>,</span><br><span class="line">                            showlegend=show_legend[i])</span><br><span class="line">             )</span><br><span class="line">    fig.add_trace(go.Violin(x=df[<span class="string">'day'</span>][(df[<span class="string">'sex'</span>] == <span class="string">'Female'</span>) &amp;</span><br><span class="line">                                        (df[<span class="string">'day'</span>] == pd.unique(df[<span class="string">'day'</span>])[i])],</span><br><span class="line">                            y=df[<span class="string">'total_bill'</span>][(df[<span class="string">'sex'</span>] == <span class="string">'Female'</span>)&amp;</span><br><span class="line">                                               (df[<span class="string">'day'</span>] == pd.unique(df[<span class="string">'day'</span>])[i])],</span><br><span class="line">                            legendgroup=<span class="string">'F'</span>, scalegroup=<span class="string">'F'</span>, name=<span class="string">'F'</span>,</span><br><span class="line">                            side=<span class="string">'positive'</span>,</span><br><span class="line">                            pointpos=pointpos_female[i],</span><br><span class="line">                            line_color=<span class="string">'mediumpurple'</span>,</span><br><span class="line">                            showlegend=show_legend[i])</span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line"><span class="comment"># update characteristics shared by all traces</span></span><br><span class="line">fig.update_traces(meanline_visible=<span class="literal">True</span>,</span><br><span class="line">                  points=<span class="string">'all'</span>, <span class="comment"># show all points</span></span><br><span class="line">                  jitter=<span class="number">0.05</span>,  <span class="comment"># add some jitter on points for better visibility</span></span><br><span class="line">                  scalemode=<span class="string">'count'</span>) <span class="comment">#scale violin plot area with total count</span></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title_text=<span class="string">"Total bill distribution&lt;br&gt;&lt;i&gt;scaled by number of bills per gender"</span>,</span><br><span class="line">    violingap=<span class="number">0</span>, violingroupgap=<span class="number">0</span>, violinmode=<span class="string">'overlay'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070458861.png" alt></p>
<h3 id="go-shan-ji-tu">go:山脊图</h3>
<p>显示多组数据的分布，常用于可视化随时间/空间变化的分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.colors <span class="keyword">import</span> n_colors</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12 sets of normal distributed random data, with increasing mean and standard deviation</span></span><br><span class="line">data = (np.linspace(<span class="number">1</span>, <span class="number">2</span>, <span class="number">12</span>)[:, np.newaxis] * np.random.randn(<span class="number">12</span>, <span class="number">200</span>) +</span><br><span class="line">            (np.arange(<span class="number">12</span>) + <span class="number">2</span> * np.random.random(<span class="number">12</span>))[:, np.newaxis])</span><br><span class="line"></span><br><span class="line">colors = n_colors(<span class="string">'rgb(5, 200, 200)'</span>, <span class="string">'rgb(200, 10, 10)'</span>, <span class="number">12</span>, colortype=<span class="string">'rgb'</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"><span class="keyword">for</span> data_line, color <span class="keyword">in</span> zip(data, colors):</span><br><span class="line">    fig.add_trace(go.Violin(x=data_line, line_color=color))</span><br><span class="line"></span><br><span class="line">fig.update_traces(orientation=<span class="string">'h'</span>, side=<span class="string">'positive'</span>, width=<span class="number">3</span>, points=<span class="literal">False</span>)</span><br><span class="line">fig.update_layout(xaxis_showgrid=<span class="literal">False</span>, xaxis_zeroline=<span class="literal">False</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710070742043.png" alt></p>
<h2 id="mi-du-tu-2-d-histogram-contour">密度图：2D Histogram Contour</h2>
<p>2D直方图轮廓图（也称为密度轮廓图）是直方图的二维概括，类似于轮廓图，但通过将由其x和y坐标指定的一组点分组到bin中并应用聚合函数，例如计数或总和（如果提供了z），用于计算要用于计算轮廓的值。这种可视化（以及相关的2D直方图）通常用于将大量数据集显示为散点图会导致点彼此重叠并隐藏图案的情况。</p>
<h3 id="shi-yong-plotly-express">使用Plotly Express</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_contour(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710071413340.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_contour(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, marginal_x=<span class="string">"histogram"</span>, marginal_y=<span class="string">"histogram"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072134581.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_contour(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, facet_col=<span class="string">"sex"</span>, color=<span class="string">"smoker"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072254454.png" alt></p>
<h3 id="tian-chong-yan-se">填充颜色</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.tips()</span><br><span class="line"></span><br><span class="line">fig = px.density_contour(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>)</span><br><span class="line">fig.update_traces(contours_coloring=<span class="string">"fill"</span>, contours_showlabels = <span class="literal">True</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072339270.png" alt></p>
<h3 id="ju-he-han-shu">聚合函数</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.iris()</span><br><span class="line"></span><br><span class="line">fig = px.density_contour(df, x=<span class="string">"petal_length"</span>, y=<span class="string">"petal_width"</span>, z=<span class="string">"sepal_length"</span>, histfunc=<span class="string">"avg"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072421605.png" alt></p>
<h3 id="shi-yong-graph-objects-hui-zhi">使用Graph Objects绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line">y = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram2dContour(</span><br><span class="line">        x = x,</span><br><span class="line">        y = y</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072503105.png" alt></p>
<h3 id="go-zi-ding-yi-yan-se">go：自定义颜色</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line">y = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram2dContour(</span><br><span class="line">        x = x,</span><br><span class="line">        y = y,</span><br><span class="line">        colorscale = <span class="string">'Blues'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072630836.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line">y = np.random.uniform(<span class="number">-1</span>, <span class="number">1</span>, size=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Histogram2dContour(</span><br><span class="line">        x = x,</span><br><span class="line">        y = y,</span><br><span class="line">        colorscale = <span class="string">'Jet'</span>,</span><br><span class="line">        contours = dict(</span><br><span class="line">            showlabels = <span class="literal">True</span>,</span><br><span class="line">            labelfont = dict(</span><br><span class="line">                family = <span class="string">'Raleway'</span>,</span><br><span class="line">                color = <span class="string">'white'</span></span><br><span class="line">            )</span><br><span class="line">        ),</span><br><span class="line">        hoverlabel = dict(</span><br><span class="line">            bgcolor = <span class="string">'white'</span>,</span><br><span class="line">            bordercolor = <span class="string">'black'</span>,</span><br><span class="line">            font = dict(</span><br><span class="line">                family = <span class="string">'Raleway'</span>,</span><br><span class="line">                color = <span class="string">'black'</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072658923.png" alt></p>
<h3 id="go-duo-chong-lei-bie-de-tu-yi-qi-hui-zhi">go：多种类别的图一起绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">t = np.linspace(<span class="number">-1</span>, <span class="number">1.2</span>, <span class="number">2000</span>)</span><br><span class="line">x = (t**<span class="number">3</span>) + (<span class="number">0.3</span> * np.random.randn(<span class="number">2000</span>))</span><br><span class="line">y = (t**<span class="number">6</span>) + (<span class="number">0.3</span> * np.random.randn(<span class="number">2000</span>))</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Histogram2dContour(</span><br><span class="line">        x = x,</span><br><span class="line">        y = y,</span><br><span class="line">        colorscale = <span class="string">'Blues'</span>,</span><br><span class="line">        reversescale = <span class="literal">True</span>,</span><br><span class="line">        xaxis = <span class="string">'x'</span>,</span><br><span class="line">        yaxis = <span class="string">'y'</span></span><br><span class="line">    ))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">        x = x,</span><br><span class="line">        y = y,</span><br><span class="line">        xaxis = <span class="string">'x'</span>,</span><br><span class="line">        yaxis = <span class="string">'y'</span>,</span><br><span class="line">        mode = <span class="string">'markers'</span>,</span><br><span class="line">        marker = dict(</span><br><span class="line">            color = <span class="string">'rgba(0,0,0,0.3)'</span>,</span><br><span class="line">            size = <span class="number">3</span></span><br><span class="line">        )</span><br><span class="line">    ))</span><br><span class="line">fig.add_trace(go.Histogram(</span><br><span class="line">        y = y,</span><br><span class="line">        xaxis = <span class="string">'x2'</span>,</span><br><span class="line">        marker = dict(</span><br><span class="line">            color = <span class="string">'rgba(0,0,0,1)'</span></span><br><span class="line">        )</span><br><span class="line">    ))</span><br><span class="line">fig.add_trace(go.Histogram(</span><br><span class="line">        x = x,</span><br><span class="line">        yaxis = <span class="string">'y2'</span>,</span><br><span class="line">        marker = dict(</span><br><span class="line">            color = <span class="string">'rgba(0,0,0,1)'</span></span><br><span class="line">        )</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    autosize = <span class="literal">False</span>,</span><br><span class="line">    xaxis = dict(</span><br><span class="line">        zeroline = <span class="literal">False</span>,</span><br><span class="line">        domain = [<span class="number">0</span>,<span class="number">0.85</span>],</span><br><span class="line">        showgrid = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis = dict(</span><br><span class="line">        zeroline = <span class="literal">False</span>,</span><br><span class="line">        domain = [<span class="number">0</span>,<span class="number">0.85</span>],</span><br><span class="line">        showgrid = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    xaxis2 = dict(</span><br><span class="line">        zeroline = <span class="literal">False</span>,</span><br><span class="line">        domain = [<span class="number">0.85</span>,<span class="number">1</span>],</span><br><span class="line">        showgrid = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis2 = dict(</span><br><span class="line">        zeroline = <span class="literal">False</span>,</span><br><span class="line">        domain = [<span class="number">0.85</span>,<span class="number">1</span>],</span><br><span class="line">        showgrid = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    height = <span class="number">600</span>,</span><br><span class="line">    width = <span class="number">600</span>,</span><br><span class="line">    bargap = <span class="number">0</span>,</span><br><span class="line">    hovermode = <span class="string">'closest'</span>,</span><br><span class="line">    showlegend = <span class="literal">False</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710072816387.png" alt></p>
<h2 id="ni-he-xian-xing-he-fei-xian-xing-qu-shi-tu-linear-and-non-linear-trendlines">拟合线性和非线性趋势图：Linear and Non-Linear Trendlines</h2>
<h3 id="shi-yong-plotly-express-hui-zhi">使用Plotly Express绘制</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, trendline=<span class="string">"ols"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073138306.png" alt></p>
<h3 id="ni-he-duo-tiao-xian-bing-cha-kan-ni-he-can-shu">拟合多条线，并查看拟合参数</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, facet_col=<span class="string">"smoker"</span>, color=<span class="string">"sex"</span>, trendline=<span class="string">"ols"</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">results = px.get_trendline_results(fig)</span><br><span class="line">print(results)</span><br><span class="line"></span><br><span class="line">results.query(<span class="string">"sex == 'Male' and smoker == 'Yes'"</span>).px_fit_results.iloc[<span class="number">0</span>].summary()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073236825.png" alt></p>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073328092.png" alt></p>
<h3 id="ni-he-fei-xian-xing-qu-shi">拟合非线性趋势</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">df = px.data.gapminder().query(<span class="string">"year == 2007"</span>)</span><br><span class="line">fig = px.scatter(df, x=<span class="string">"gdpPercap"</span>, y=<span class="string">"lifeExp"</span>, color=<span class="string">"continent"</span>, trendline=<span class="string">"lowess"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/05/basic_skills/plotly/statistical_charts/image-20200710073406803.png" alt></p>

    </div>

    
    
    <div>
  
    <div style="text-align:center;color:#bfbfbf;font-size:16px;">
      <span>-------- 本文结束 </span>
      <i class="fa fa-coffee"></i>
      <span> 感谢阅读 --------</span>
    </div>
  
</div>
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    鼓励一下
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechat.png" alt="Li Zhen 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/ali.png" alt="Li Zhen 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/plotly/" rel="tag"><i class="fa fa-tag"></i> plotly</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/06/26/research/ee_model/" rel="prev" title="事件抽取模型复现核心代码">
      <i class="fa fa-chevron-left"></i> 事件抽取模型复现核心代码
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#tong-ji-tu"><span class="nav-number">1.</span> <span class="nav-text">统计图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wu-chai-tu-error-bar"><span class="nav-number">2.</span> <span class="nav-text">误差图：error bar</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-lai-hui-zhi"><span class="nav-number">2.1.</span> <span class="nav-text">使用 Plotly Express 来绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fei-dui-cheng-wu-chai"><span class="nav-number">2.2.</span> <span class="nav-text">非对称误差</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#graph-objects-hui-zhi-error-bar"><span class="nav-number">2.3.</span> <span class="nav-text">graph_objects 绘制Error Bar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-hui-zhi-fei-dui-cheng-error-bar"><span class="nav-number">2.4.</span> <span class="nav-text">go:绘制非对称Error Bar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shi-yong-y-zhi-de-bai-fen-bi-zuo-wei-wu-chai"><span class="nav-number">2.5.</span> <span class="nav-text">go:使用y 值的百分比作为误差</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-heng-ding-pian-yi"><span class="nav-number">2.6.</span> <span class="nav-text">go:恒定偏移</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shui-ping-error-bar"><span class="nav-number">2.7.</span> <span class="nav-text">go:水平 Error Bar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-dai-error-bar-de-zhu-zhuang-tu"><span class="nav-number">2.8.</span> <span class="nav-text">go:带Error Bar的柱状图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-yan-se-he-yang-shi"><span class="nav-number">2.9.</span> <span class="nav-text">go:颜色和样式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#he-tu-box"><span class="nav-number">3.</span> <span class="nav-text">盒图 box</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-code-plotly-express-code-hui-zhi-xiang-xian-tu"><span class="nav-number">3.1.</span> <span class="nav-text">使用plotly.express绘制箱线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhi-ding-lie-hui-zhi-duo-ge-xiang-xian-tu"><span class="nav-number">3.2.</span> <span class="nav-text">指定列，绘制多个箱线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xian-shi-chi-san-de-dian"><span class="nav-number">3.3.</span> <span class="nav-text">显示离散的点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xuan-ze-si-fen-wei-shu-ji-suan-suan-fa"><span class="nav-number">3.4.</span> <span class="nav-text">选择四分位数计算算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#si-fen-wei-suan-fa-zhi-jian-de-chai-yi"><span class="nav-number">3.5.</span> <span class="nav-text">四分位算法之间的差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xiang-xian-tu-de-yang-shi"><span class="nav-number">3.6.</span> <span class="nav-text">箱线图的样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-graph-objects-hui-zhi-xiang-xian-tu"><span class="nav-number">3.7.</span> <span class="nav-text">使用graph_objects绘制箱线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shui-ping-xiang-xian-tu"><span class="nav-number">3.8.</span> <span class="nav-text">go:水平箱线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-wei-shu-ju-tian-jia-pian-yi"><span class="nav-number">3.9.</span> <span class="nav-text">go:为数据添加偏移</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shi-yong-ji-suan-si-fen-wei-de-suan-fa"><span class="nav-number">3.10.</span> <span class="nav-text">go:使用计算四分位的算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhi-ding-de-si-fen-wei-shu"><span class="nav-number">3.11.</span> <span class="nav-text">go:指定的四分位数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhao-se"><span class="nav-number">3.12.</span> <span class="nav-text">go:着色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-xian-shi-jun-zhi-he-fang-chai"><span class="nav-number">3.13.</span> <span class="nav-text">go:显示均值和方差</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-chi-qun-dian"><span class="nav-number">3.14.</span> <span class="nav-text">go:离群点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-xiang-xian-tu-zu"><span class="nav-number">3.15.</span> <span class="nav-text">go:箱线图组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-cai-hong-xiang-xian-tu"><span class="nav-number">3.16.</span> <span class="nav-text">go:彩虹箱线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#code-example"><span class="nav-number">3.17.</span> <span class="nav-text">code example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zhi-fang-tu-histograms"><span class="nav-number">4.</span> <span class="nav-text">直方图：Histograms</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-hui-zhi-zhi-fang-tu"><span class="nav-number">4.1.</span> <span class="nav-text">使用Plotly Express绘制直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#she-zhi-bin-de-shu-liang"><span class="nav-number">4.2.</span> <span class="nav-text">设置bin的数量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gen-ju-y-de-tong-ji-zuo-zhi-fang-tu"><span class="nav-number">4.3.</span> <span class="nav-text">根据y的统计做直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-bai-fen-bi"><span class="nav-number">4.4.</span> <span class="nav-text">使用百分比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhi-fang-tu-de-wai-guan"><span class="nav-number">4.5.</span> <span class="nav-text">直方图的外观</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhong-die-zhi-fang-tu"><span class="nav-number">4.6.</span> <span class="nav-text">重叠直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-zhi-fang-tu-han-shu-histfunc"><span class="nav-number">4.7.</span> <span class="nav-text">使用直方图函数：histfunc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fen-bu-zi-tu"><span class="nav-number">4.8.</span> <span class="nav-text">分布子图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-go-histogram-hui-zhi-zhi-fang-tu"><span class="nav-number">4.9.</span> <span class="nav-text">使用go.Histogram绘制直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shi-yong-bai-fen-bi"><span class="nav-number">4.10.</span> <span class="nav-text">go:使用百分比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shui-ping-zhi-fang-tu"><span class="nav-number">4.11.</span> <span class="nav-text">go:水平直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhong-die-zhi-fang-tu"><span class="nav-number">4.12.</span> <span class="nav-text">go:重叠直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-dui-die-zhi-fang-tu"><span class="nav-number">4.13.</span> <span class="nav-text">go:堆叠直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhi-fang-tu-yang-shi"><span class="nav-number">4.14.</span> <span class="nav-text">go:直方图样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-lei-ji-zhi-fang-tu"><span class="nav-number">4.15.</span> <span class="nav-text">go:累积直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhi-ding-ju-he-han-shu"><span class="nav-number">4.16.</span> <span class="nav-text">go:指定聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zi-ding-yi-bin"><span class="nav-number">4.17.</span> <span class="nav-text">go:自定义bin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-tiao-xing-tu-he-zhi-fang-tu-bi-jiao"><span class="nav-number">4.18.</span> <span class="nav-text">go：条形图和直方图比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhong-die-zhi-fang-tu-1"><span class="nav-number">4.19.</span> <span class="nav-text">go:重叠直方图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fen-bu-tu-distplots"><span class="nav-number">5.</span> <span class="nav-text">分布图(Distplots)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-distplot-figure-factory-lai-zu-he-duo-chong-tu"><span class="nav-number">5.1.</span> <span class="nav-text">使用distplot figure factory 来组合多种图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#duo-zu-shu-ju"><span class="nav-number">5.2.</span> <span class="nav-text">多组数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#she-zhi-bin-de-kuan-du"><span class="nav-number">5.3.</span> <span class="nav-text">设置bin的宽度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#she-zhi-wen-ben-yan-se-he-biao-ti"><span class="nav-number">5.4.</span> <span class="nav-text">设置文本颜色和标题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hui-zhi-zheng-tai-qu-xian"><span class="nav-number">5.5.</span> <span class="nav-text">绘制正态曲线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhi-hui-zhi-curve-he-rug"><span class="nav-number">5.6.</span> <span class="nav-text">只绘制Curve 和 Rug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhi-hui-zhi-hist-he-rug"><span class="nav-number">5.7.</span> <span class="nav-text">只绘制Hist 和 Rug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-pandas"><span class="nav-number">5.8.</span> <span class="nav-text">使用pandas</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re-li-tu-2-d-histograms-density-heatmaps"><span class="nav-number">6.</span> <span class="nav-text">热力图：2D Histograms&#x2F;Density Heatmaps</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-hui-zhi-density-heatmaps"><span class="nav-number">6.1.</span> <span class="nav-text">使用Plotly Express绘制Density Heatmaps</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#she-zhi-density-heatmaps-zhong-bin-de-shu-liang"><span class="nav-number">6.2.</span> <span class="nav-text">设置Density Heatmaps 中bin的数量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#density-heatmaps-zuo-wei-zhu-tu-zhi-fang-tu-zuo-wei-fu-tu"><span class="nav-number">6.3.</span> <span class="nav-text">Density Heatmaps作为主图，直方图作为附图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#density-heatmaps-rong-ru-duo-wei-shu-ju"><span class="nav-number">6.4.</span> <span class="nav-text">Density Heatmaps 融入多维数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#density-heatmaps-shi-yong-ju-he-han-shu"><span class="nav-number">6.5.</span> <span class="nav-text">Density Heatmaps使用聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-hui-zhi-er-yuan-zheng-tai-2-d-zhi-fang-tu"><span class="nav-number">6.6.</span> <span class="nav-text">go:绘制二元正态2D直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-she-zhi-yan-se-yang-shi"><span class="nav-number">6.7.</span> <span class="nav-text">go:设置颜色样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-hui-zhi-duo-ge-zhi-fang-tu"><span class="nav-number">6.8.</span> <span class="nav-text">go:绘制多个直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-san-dian-tu-he-2-d-zhi-fang-tu"><span class="nav-number">6.9.</span> <span class="nav-text">go:散点图和2D直方图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#san-dian-ju-zhen-scatterplot-matrix"><span class="nav-number">7.</span> <span class="nav-text">散点矩阵：Scatterplot Matrix</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-hui-zhi-san-dian-tu-ju-zhen"><span class="nav-number">7.1.</span> <span class="nav-text">使用Plotly Express绘制散点图矩阵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zhi-ding-yan-se-lei-bie"><span class="nav-number">7.2.</span> <span class="nav-text">指定颜色类别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#diao-zheng-san-dian-tu-ju-zhen-de-yang-shi"><span class="nav-number">7.3.</span> <span class="nav-text">调整散点图矩阵的样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-splom"><span class="nav-number">7.4.</span> <span class="nav-text">go.Splom</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shan-chu-dui-jiao-xian-shang-de-tu"><span class="nav-number">7.5.</span> <span class="nav-text">go:删除对角线上的图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhi-hui-zhi-xia-dui-jiao-xian"><span class="nav-number">7.6.</span> <span class="nav-text">go: 只绘制下对角线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zhi-hui-zhi-bu-fen-tu"><span class="nav-number">7.7.</span> <span class="nav-text">go: 只绘制部分图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-kaggle-an-li"><span class="nav-number">7.8.</span> <span class="nav-text">go:kaggle 案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fen-mian-ge-zi-tu-facet-and-trellis"><span class="nav-number">8.</span> <span class="nav-text">分面格子图：Facet and Trellis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#col-facet-san-dian-tu"><span class="nav-number">8.1.</span> <span class="nav-text">col facet：散点图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#row-facet-tiao-xing-tu"><span class="nav-number">8.2.</span> <span class="nav-text">row facet：条形图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wrapping-column-facets"><span class="nav-number">8.3.</span> <span class="nav-text">Wrapping Column Facets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#facet-zhi-fang-tu"><span class="nav-number">8.4.</span> <span class="nav-text">facet:直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#du-li-de-axes"><span class="nav-number">8.5.</span> <span class="nav-text">独立的axes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ding-zhi-subplot-de-tu-biao-ti"><span class="nav-number">8.6.</span> <span class="nav-text">定制subplot的图标题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-match-lai-tong-bu-zhou"><span class="nav-number">8.7.</span> <span class="nav-text">使用match来同步轴</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ping-xing-lei-bie-shi-yi-tu-parallel-categories-diagram"><span class="nav-number">9.</span> <span class="nav-text">平行类别示意图：Parallel Categories Diagram</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yan-se-yang-shi"><span class="nav-number">9.1.</span> <span class="nav-text">颜色样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-graph-objects-lai-hui-zhi-ping-xing-lei-bie-tu"><span class="nav-number">9.2.</span> <span class="nav-text">使用graph_objects来绘制平行类别图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-she-zhi-duo-ge-yan-se-yang-shi"><span class="nav-number">9.3.</span> <span class="nav-text">go：设置多个颜色样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-xuan-ze-san-dian-hui-zhi-si-dai-yan-se"><span class="nav-number">9.4.</span> <span class="nav-text">go:选择散点，绘制丝带颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-gei-yu-bu-tong-de-san-dian-bu-tong-de-yan-se"><span class="nav-number">9.5.</span> <span class="nav-text">go:给与不同的散点不同的颜色</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shu-tree"><span class="nav-number">10.</span> <span class="nav-text">树：Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#an-zhuang-igraph"><span class="nav-number">10.1.</span> <span class="nav-text">安装 igraph</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-hui-zhi-shu"><span class="nav-number">10.2.</span> <span class="nav-text">go:绘制树</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-tian-jia-wen-ben"><span class="nav-number">10.3.</span> <span class="nav-text">go :添加文本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xiao-ti-qin-tu-violin"><span class="nav-number">11.</span> <span class="nav-text">小提琴图：Violin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-hui-zhi-xiao-ti-qin-tu"><span class="nav-number">11.1.</span> <span class="nav-text">使用Plotly Express绘制小提琴图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tong-shi-hui-zhi-he-tu-san-dian-tu-fen-bu"><span class="nav-number">11.2.</span> <span class="nav-text">同时绘制盒图散点图分布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hui-zhi-duo-ge-xiao-ti-qin-tu"><span class="nav-number">11.3.</span> <span class="nav-text">绘制多个小提琴图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#yi-overlap-de-fang-shi-hui-zhi"><span class="nav-number">11.4.</span> <span class="nav-text">以overlap的方式绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-graph-object-hui-zhi"><span class="nav-number">11.5.</span> <span class="nav-text">使用graph_object绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-duo-ge-trace"><span class="nav-number">11.6.</span> <span class="nav-text">go:多个trace</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-fen-zu-hui-zhi-xiao-ti-qin-tu"><span class="nav-number">11.7.</span> <span class="nav-text">go:分组绘制小提琴图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-fen-ge-xiao-ti-qin-tu"><span class="nav-number">11.8.</span> <span class="nav-text">go:分割小提琴图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-gao-ji-hui-zhi"><span class="nav-number">11.9.</span> <span class="nav-text">go:高级绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-shan-ji-tu"><span class="nav-number">11.10.</span> <span class="nav-text">go:山脊图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mi-du-tu-2-d-histogram-contour"><span class="nav-number">12.</span> <span class="nav-text">密度图：2D Histogram Contour</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express"><span class="nav-number">12.1.</span> <span class="nav-text">使用Plotly Express</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tian-chong-yan-se"><span class="nav-number">12.2.</span> <span class="nav-text">填充颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ju-he-han-shu"><span class="nav-number">12.3.</span> <span class="nav-text">聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-graph-objects-hui-zhi"><span class="nav-number">12.4.</span> <span class="nav-text">使用Graph Objects绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-zi-ding-yi-yan-se"><span class="nav-number">12.5.</span> <span class="nav-text">go：自定义颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#go-duo-chong-lei-bie-de-tu-yi-qi-hui-zhi"><span class="nav-number">12.6.</span> <span class="nav-text">go：多种类别的图一起绘制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ni-he-xian-xing-he-fei-xian-xing-qu-shi-tu-linear-and-non-linear-trendlines"><span class="nav-number">13.</span> <span class="nav-text">拟合线性和非线性趋势图：Linear and Non-Linear Trendlines</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shi-yong-plotly-express-hui-zhi"><span class="nav-number">13.1.</span> <span class="nav-text">使用Plotly Express绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ni-he-duo-tiao-xian-bing-cha-kan-ni-he-can-shu"><span class="nav-number">13.2.</span> <span class="nav-text">拟合多条线，并查看拟合参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ni-he-fei-xian-xing-qu-shi"><span class="nav-number">13.3.</span> <span class="nav-text">拟合非线性趋势</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a href='/'>
    <img class="site-author-image" itemprop="image" alt="Li Zhen"
      src="/images/snoppy.jpeg">
  </a>
  <p class="site-author-name" itemprop="name">Li Zhen</p>
  <div class="site-description" itemprop="description">他，不论在成年还是在小时候，必须踏上一条极为艰苦的道路，不过这是一条最可靠的道路。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jeffery0628" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jeffery0628" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jeffery.lee.0628@gmail.com" title="邮箱 → mailto:jeffery.lee.0628@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>邮箱</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Li Zhen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">869k</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      我的第 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位朋友，
    </span>
    <span class="site-pv">
      历经 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次回眸才与你相遇
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

  






  <script src="/js/activate-power-mode.min.js"></script>
  <script>
    POWERMODE.colorful = true;
    POWERMODE.shake = false;
    document.body.addEventListener('input', POWERMODE);
  </script>


 

<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20180101,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
    div.innerHTML = `我已在此等候你 ${ages}`;
  }
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>


<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdnjs.cloudflare.com/ajax/libs/valine/1.3.10/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'tChTbEIggDSVcdhPBUf0MFxW-gzGzoHsz',
      appKey     : 'sJ6xUiFnifEDIIfnj3Ut9zy1',
      placeholder: "留下你的小脚印吧！",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '8' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
